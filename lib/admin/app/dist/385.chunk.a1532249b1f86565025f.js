(self.webpackChunkvimeography_admin=self.webpackChunkvimeography_admin||[]).push([[385],{117:(e,t,a)=>{"use strict";a.r(t);var n=a(7271),r=a(7650),l=(a(4639),a(5673)),o=a(5977),i=a(8767),c=a(7323),m=a(526),s=a(8172),u={themes:[]},v=function(e,t){switch(t.type){case"HYDRATE":return e.themes.length>0?e:(0,s.ZP)(e,(function(e){e.themes=t.payload}));case"RESET":return(0,s.ZP)(e,(function(e){e.themes=t.payload}));case"THEME.SETTING.UPDATE_DEFAULT_VALUE":var a=e.themes.findIndex((function(e){return e.name===t.payload.themeName})),n=e.themes[a].settings.findIndex((function(e){return e.id===t.payload.settingId}));return(0,s.ZP)(e,(function(e){e.themes[a].settings[n].value=t.payload.value}));default:return console.log("unknown action type: "+t.type),e}};const p=function(e){var t=n.useReducer(v,u),a=t[0],r=t[1],l=(0,i.useQuery)("getThemes",(function(){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/themes").then((function(e){return e.json()})).then((function(e){return r({payload:e,type:"HYDRATE"}),e}))})),o=l.isLoading,c=l.error,s=l.data;return n.createElement(m.Z.Provider,{value:{isLoading:o,error:c,data:s,state:a,dispatch:r}},e.children)};var d=a(6758),h=a(3727),f=a(7278),g=a(1107),E=function(){return(E=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const y=function(e){var t=e.setting,a=n.useState(!1),r=a[0],l=a[1],o=n.useState(t.value),i=o[0],c=o[1],m=n.useContext(f.Z);return n.createElement("div",null,n.createElement("div",{className:"vm-flex vm-items-center",onClick:function(){return l(!r)}},n.createElement("div",{className:"vm-w-8 vm-h-6 vm-mr-2 vm-border-2 vm-border-white vm-shadow vm-cursor-pointer",style:{backgroundColor:i}}),n.createElement("label",{className:"vm-font-semibold"},t.label)),r&&n.createElement(g.AI,{color:i,onChange:function(e){var a="rgb("+e.rgb.r+" "+e.rgb.g+" "+e.rgb.b+" / "+e.rgb.a+")";c(a),m.dispatch({type:"UPDATE_GALLERY_APPEARANCE",payload:E(E({},t),{value:a})})},className:"vm-mt-2"}))};var _=a(2625),b=(a(2534),function(){return(b=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)});const w=function(e){var t=e.setting,a=n.useState(parseInt(t.value)),r=a[0],l=a[1],o=n.useContext(f.Z);return n.createElement("div",null,n.createElement("div",{className:"vm-font-semibold vm-mb-2"},t.label),n.createElement(_.Z,{value:r,defaultValue:t.value,min:t.min,max:t.max,step:t.step,formatter:function(e){return e+"px"},onChange:function(e){l(e),o.dispatch({type:"UPDATE_GALLERY_APPEARANCE",payload:b(b({},t),{value:e})})}}))};var x=a(6976),N=(a(6473),function(){return(N=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)});const M=function(e){var t=e.setting,a=n.useState(parseInt(t.value)),r=a[0],l=a[1],o=n.useContext(f.Z);return n.createElement("div",null,n.createElement("div",{className:"vm-font-semibold vm-mb-2"},t.label),n.createElement(x.ZP,{value:parseInt(r),onChange:function(e){l(e),o.dispatch({type:"UPDATE_GALLERY_APPEARANCE",payload:N(N({},t),{value:e})})},min:parseInt(t.min),max:parseInt(t.max),step:parseInt(t.step)}))};var A=a(888),P=(a(9107),function(){return(P=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)});const k=function(e){var t=e.setting,a=n.useState("block"===t.value),r=a[0],l=a[1],o=n.useContext(f.Z);return n.createElement("div",null,n.createElement("label",{className:"vm-flex vm-items-center"},n.createElement(A.Z,{checked:r,onChange:function(e){var a=e.target.checked;l(a),o.dispatch({type:"UPDATE_GALLERY_APPEARANCE",payload:P(P({},t),{value:a?"block":"none"})})}}),n.createElement("span",{className:"vm-font-semibold vm-mb-2 vm-ml-2 vm-transform vm-translate-y-1"},t.label)))},C=function(){var e=n.useContext(f.Z),t=n.useContext(m.Z);if(t.isLoading)return n.createElement("div",null,"Loading…");var a=t.state.themes.find((function(t){return t.name===e.data.theme_name}));return n.createElement("div",{className:"vm-overflow-scroll",style:{maxHeight:"30rem"}},n.createElement("div",{className:"vm-py-5 vm-border-b vm-border-gray-200 vm-relative"},n.createElement("div",{className:"vm-absolute vm-inset-0 vm-opacity-90",style:{background:"linear-gradient(to left, rgb(230, 100, 101), rgb(145 152 229 / 56%)), url("+a.thumbnail+") no-repeat 100% 100%"}}),n.createElement("div",{className:"vm-z-10 vm-relative"},n.createElement("div",{className:"vm-flex vm-items-center vm-px-4 vm-py-2"},n.createElement("div",{className:"vm-flex-1"},n.createElement("div",{className:"vm-text-white",style:{textShadow:"rgb(28 31 35 / 40%) 0px 2px 2px"}},"Current gallery theme"),n.createElement("div",{className:"vm-font-semibold vm-text-white vm-text-2xl",style:{textShadow:"rgb(28 31 35 / 40%) 0px 2px 2px"}},a.name)),n.createElement(h.rU,{to:"/appearance/themes",className:"vm-bg-white vm-px-2 vm-py-1 vm-rounded vm-text-gray-700 vm-flex vm-items-center vm-text-xs vm-border"},n.createElement("svg",{className:"vm-w-4 vm-h-4 vm-mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"})),"Switch theme…")))),n.createElement("button",{className:"vm-p-4 vm-text-blue-500 vm-flex vm-items-center hover:vm-underline",onClick:function(){e.dispatch({type:"RESET_GALLERY_APPEARANCE"}),t.dispatch({type:"RESET",payload:t.data})}},n.createElement("svg",{className:"vm-w-4 vm-h-4 vm-mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})),"Reset appearance"),a.settings.map((function(e){var t=null;if("colorpicker"===e.type)t=y;else if("numeric"===e.type)t=w;else if("slider"===e.type)t=M;else{if("visibility"!==e.type)return null;t=k}return n.createElement("div",{key:e.id,className:"vm-px-4 vm-py-5 vm-border-b vm-border-gray-200"},n.createElement(t,{setting:e}))})))};var O=function(e){var t=e.children;return n.createElement("div",{className:"vm-mb-4"},t)},L=function(e){var t=e.children;return n.createElement("label",{className:"vm-font-semibold vm-text-gray-700 vm-block vm-mb-1"},t)};const T=function(){var e=n.useContext(f.Z),t=n.useState(!1),a=t[0],r=t[1],l=function(t){e.dispatch({type:"EDIT_GALLERY_STATE",payload:t})};return n.createElement("div",{className:"vm-p-4"},n.createElement(O,null,n.createElement(L,null,"Refresh the videos every"),n.createElement("div",{className:"vm-flex vm-items-center vm-justify-between"},n.createElement("select",{className:"",value:e.state.cache_timeout,onChange:function(e){return l({cache_timeout:parseInt(e.target.value)})}},n.createElement("option",{value:"0"},"page load"),n.createElement("option",{value:"900"},"15 minutes"),n.createElement("option",{value:"1800"},"30 minutes"),n.createElement("option",{value:"3600"},"hour"),n.createElement("option",{value:"86400"},"day"),n.createElement("option",{value:"604800"},"week"),n.createElement("option",{value:"2419200"},"month")),n.createElement("button",{className:"vm-flex vm-items-center vm-text-blue-500 vm-outline-none focus:vm-outline-none",onClick:function(){r(!0);var e=window.location.href+"&vimeography-action=refresh_gallery_cache";window.location.href=e}},n.createElement("svg",{className:"vm-w-4 vm-h-4 vm-mr-1 "+(a?"vm-animate-spin":""),fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})),a?"Refreshing…":"Force refresh"))),n.createElement(O,null,n.createElement(L,null,"Number of videos"),n.createElement("input",{type:"number",min:"0",max:"25",value:e.state.video_limit,onChange:function(e){return l({video_limit:parseInt(e.target.value)})},className:"vm-mb-2 vm-w-24"}),n.createElement("p",{className:"vm-text-xs vm-text-gray-400"},"Specifies the number of videos that will appear in your gallery. Set to 0 for the maximum amount. You can display unlimited videos with"," ",n.createElement("a",{className:"vm-text-blue-500",href:"https://vimeography.com/pro",target:"_blank"},"Vimeography Pro."))),n.createElement(O,null,n.createElement(L,null,"Max gallery width"),n.createElement("input",{type:"text",placeholder:"eg. 960px, 35%",value:e.state.gallery_width,onChange:function(e){return l({gallery_width:e.target.value})},className:"vm-mb-2"}),n.createElement("p",{className:"vm-text-xs vm-text-gray-400"},"Specifies the maximum width that your gallery container can expand to.")),n.createElement(O,null,n.createElement(L,null,"Featured video URL"),n.createElement("input",{type:"text",placeholder:"eg. https://vimeo.com/3567483",value:e.state.featured_video,onChange:function(e){return l({featured_video:e.target.value})},className:"vm-mb-2 vm-w-full"}),n.createElement("p",{className:"vm-text-xs vm-text-gray-400"},"Sets the specified video as the first video that appears in your gallery.")))},S=function(){var e=n.useContext(f.Z),t=n.useContext(m.Z),a=n.useRef(),r=n.useRef();return n.createElement("div",null,n.createElement(h.rU,{to:"/appearance",className:"vm-text-blue-500 vm-p-4 vm-flex vm-items-center"},n.createElement("svg",{className:"vm-w-4 vm-h-4 vm-mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})),"Back to appearance editor"),n.createElement("form",{ref:a,method:"post",action:""},n.createElement("input",{type:"hidden",name:"vimeography-theme-verification",value:window.vimeographyThemeNonce}),n.createElement("input",{type:"hidden",name:"theme_name",value:"",ref:r}),n.createElement("input",{type:"hidden",name:"vimeography-action",value:"set_gallery_theme"})),n.createElement("div",{className:"vm-max-h-96 vm-overflow-scroll"},t.data.map((function(t){var l=t.name.toLowerCase()===e.data.theme_name.toLowerCase();return n.createElement("div",{key:t.name,onClick:function(){return e=t.name,r.current.value=e,void a.current.submit();var e},className:"vm-group vm-flex vm-items-center vm-px-4 vm-py-2 vm-cursor-pointer vm-border-b vm-transition "+(l?"vm-bg-indigo-500":"hover:vm-bg-indigo-600")},n.createElement("img",{src:t.thumbnail,className:"vm-w-10 vm-mr-3 vm-rounded vm-shadow"}),n.createElement("div",null,n.createElement("span",{className:"vm-font-semibold vm-block vm-text-sm group-hover:vm-text-white "+(l?"vm-text-white":"vm-text-gray-700")},t.name),n.createElement("span",{className:"vm-text-xs group-hover:vm-text-gray-50 "+(l?"vm-text-gray-50":"vm-text-gray-400")},"v",t.version),!l&&n.createElement("span",{className:'vm-text-xs vm-opacity-0 group-hover:vm-opacity-100 group-hover:vm-text-gray-50 "vm-text-gray-400"\n                    }'}," ","• Switch to ",t.name)))}))))};var D=a(5888),R=a(5800);const z=function(){return n.createElement("div",{className:"vm-p-5"},n.createElement("h2",{className:"vm-text-xl vm-font-bold vm-text-gray-700 vm-mb-4"},"Add the features your viewers are asking for."),n.createElement("ul",{className:"vm-mb-6"},n.createElement("li",{className:"vm-flex vm-items-center vm-mb-2"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-text-blue-500 vm-mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M4.555 5.168A1 1 0 003 6v8a1 1 0 001.555.832L10 11.202V14a1 1 0 001.555.832l6-4a1 1 0 000-1.664l-6-4A1 1 0 0010 6v2.798l-5.445-3.63z"})),n.createElement("span",{className:"vm-text-gray-600"},"Unlimited videos")),n.createElement("li",{className:"vm-flex vm-items-center vm-mb-2"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-text-yellow-500 vm-mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})),"Searchable galleries"),n.createElement("li",{className:"vm-flex vm-items-center vm-mb-2"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-text-indigo-500 vm-mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M5.5 16a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 16h-8z"})),"Downloadable videos"),n.createElement("li",{className:"vm-flex vm-items-center vm-mb-2"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-text-green-500 vm-mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"})),"Simple sorting"),n.createElement("li",{className:"vm-flex vm-items-center vm-mb-2"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-text-pink-500 vm-mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})),"Show protected videos"),n.createElement("li",{className:"vm-flex vm-items-center vm-mb-2"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-text-red-500 vm-mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})),"No code required")),n.createElement("a",{href:"https://vimeography.com/pro",target:"_blank",className:"vm-px-4 vm-py-3 vm-rounded vm-border vm-shadow-sm vm-mx-auto vm-text-base vm-bg-white vm-text-indigo-800 vm-text-center vm-mb-2 vm-inline-flex vm-items-center vm-justify-center vm-w-full"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})),"Watch the video"),n.createElement("p",{className:"vm-text-xs vm-text-gray-500 vm-text-center"},"Over 5,000 happy customers!"))};var B=n.lazy((function(){return a.e(723).then(a.t.bind(a,9723,23))})),I=function(e){return n.createElement(h.OL,{to:e.to,exact:!0,className:"vm-bg-gray-50 vm-border-b vm-flex vm-items-center vm-px-4 vm-py-3 vm-text-gray-700 vm-outline-none hover:no-underline focus:vm-outline-none focus:vm-no-underline vm-font-semibold",activeClassName:"vm-bg-white vm-border-l-4 vm-border-indigo-700 vm-outline-none focus:vm-outline-none focus:vm-no-underline"},e.children)},H=function(){var e={open:{height:"auto",opacity:1},closed:{height:"0",opacity:0}},t=(0,o.$B)({path:"/",strict:!0}),a=(0,o.$B)({path:"/appearance",strict:!0}),r=n.useContext(f.Z),l=(0,o.$B)({path:"/pro",strict:!0});return n.createElement(n.Fragment,null,n.createElement(I,{to:"/"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-mr-2 vm-text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})),n.createElement("span",null,"Settings")),n.createElement(D.ww.div,{className:"vm-overflow-hidden",animate:t.isExact?"open":"closed",variants:e,transition:{duration:.25,ease:"easeOut",bounce:0}},n.createElement(T,null)),n.createElement(I,{to:"/appearance"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-mr-2 vm-text-green-600",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z",clipRule:"evenodd"})),n.createElement("span",null,"Appearance")),n.createElement(D.ww.div,{className:"vm-overflow-hidden",animate:a?"open":"closed",variants:e,transition:{duration:.25,ease:"easeOut",bounce:0}},n.createElement(o.rs,null,n.createElement(o.AW,{path:"/appearance/themes"},n.createElement(S,null)),n.createElement(o.AW,{path:"/appearance",strict:!0},n.createElement(C,null)))),n.createElement(I,{to:"/pro"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-mr-2 vm-text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z",clipRule:"evenodd"})),n.createElement("span",null,"Vimeography Pro")),n.createElement(D.ww.div,{className:"vm-overflow-hidden",animate:l?"open":"closed",variants:e,transition:{duration:.25,ease:"easeOut",bounce:0}},n.createElement(R.ErrorBoundary,{FallbackComponent:z},n.createElement(n.Suspense,{fallback:n.createElement("p",null,"Loading Vimeography Pro…")},n.createElement(B,{isProPanel:l,galleryCtx:r})))))},U=function(){var e=n.useState("Loading…"),t=e[0],a=e[1];return n.useEffect((function(){var e=setInterval((function(){var e=["Be right there…","Churning the butter…","Petting cute doggies…","Checking the fridge again…","Flossing…","Loading…","Waiting in line…","On my way…","Ready in a sec…","Coming in for landing…","Adding final touches…","Quick restroom visit…","Pouring coffee…","Traffic on 77N…","Stuck behind a slow walker…","Waiting for rain to stop…","Going as fast as I can…","Almost got it…"],t=e[Math.floor(Math.random()*e.length)];a(t)}),2e3);return function(){clearInterval(e)}}),[]),n.createElement("div",{className:"vm-bg-gray-200 vm-animate-pulse vm-w-full vm-flex vm-flex-col vm-items-center vm-justify-center vm-rounded vm-border vm-border-gray-200 vm-mt-5 vm-sticky vm-top-10 vm-text-indigo-600",style:{height:"30rem",backgroundImage:"linear-gradient(16deg, rgba(116, 116, 116,0.02) 0%, rgba(116, 116, 116,0.02) 25%,transparent 25%, transparent 96%,rgba(177, 177, 177,0.02) 96%, rgba(177, 177, 177,0.02) 100%),linear-gradient(236deg, rgba(148, 148, 148,0.02) 0%, rgba(148, 148, 148,0.02) 53%,transparent 53%, transparent 59%,rgba(56, 56, 56,0.02) 59%, rgba(56, 56, 56,0.02) 100%),linear-gradient(284deg, rgba(16, 16, 16,0.02) 0%, rgba(16, 16, 16,0.02) 46%,transparent 46%, transparent 71%,rgba(181, 181, 181,0.02) 71%, rgba(181, 181, 181,0.02) 100%),linear-gradient(316deg, rgba(197, 197, 197,0.02) 0%, rgba(197, 197, 197,0.02) 26%,transparent 26%, transparent 49%,rgba(58, 58, 58,0.02) 49%, rgba(58, 58, 58,0.02) 100%),linear-gradient(90deg, rgb(255,255,255),rgb(255,255,255))"}},n.createElement("svg",{className:"vm-w-6 vm-h-6 vm-animate-spin vm-text-indigo-800 vm-mb-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M9.504 1.132a1 1 0 01.992 0l1.75 1a1 1 0 11-.992 1.736L10 3.152l-1.254.716a1 1 0 11-.992-1.736l1.75-1zM5.618 4.504a1 1 0 01-.372 1.364L5.016 6l.23.132a1 1 0 11-.992 1.736L4 7.723V8a1 1 0 01-2 0V6a.996.996 0 01.52-.878l1.734-.99a1 1 0 011.364.372zm8.764 0a1 1 0 011.364-.372l1.733.99A1.002 1.002 0 0118 6v2a1 1 0 11-2 0v-.277l-.254.145a1 1 0 11-.992-1.736l.23-.132-.23-.132a1 1 0 01-.372-1.364zm-7 4a1 1 0 011.364-.372L10 8.848l1.254-.716a1 1 0 11.992 1.736L11 10.58V12a1 1 0 11-2 0v-1.42l-1.246-.712a1 1 0 01-.372-1.364zM3 11a1 1 0 011 1v1.42l1.246.712a1 1 0 11-.992 1.736l-1.75-1A1 1 0 012 14v-2a1 1 0 011-1zm14 0a1 1 0 011 1v2a1 1 0 01-.504.868l-1.75 1a1 1 0 11-.992-1.736L16 13.42V12a1 1 0 011-1zm-9.618 5.504a1 1 0 011.364-.372l.254.145V16a1 1 0 112 0v.277l.254-.145a1 1 0 11.992 1.736l-1.735.992a.995.995 0 01-1.022 0l-1.735-.992a1 1 0 01-.372-1.364z",clipRule:"evenodd"})),n.createElement("div",{className:"vm-text-xs"},t))};const W=function(){var e=n.useContext(f.Z),t=n.useState(!1),a=t[0],r=t[1];return e.isLoading?n.createElement(U,null):n.createElement("div",{className:"vm-bg-gray-100 vm-rounded vm-border vm-border-gray-200 vm-mt-5 vm-sticky vm-top-10"},n.createElement("div",{className:"vm-p-4 vm-bg-indigo-700 vm-rounded-t"},n.createElement("h2",{className:"vm-text-lg vm-text-white vm-font-bold"},e.state.title),n.createElement("a",{href:e.state.source_url,className:"vm-text-indigo-50 vm-text-sm"},e.state.source_url)),n.createElement(H,null),n.createElement("div",null,n.createElement("div",{className:"vm-m-4 vm-flex vm-justify-end"},n.createElement("button",{className:"vm-bg-blue-600 vm-text-white vm-px-3 vm-py-2 vm-rounded",onClick:function(){return t=void 0,a=void 0,l=function(){var t,a,n;return function(e,t){var a,n,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}}(this,(function(l){switch(l.label){case 0:r(!0),l.label=1;case 1:return l.trys.push([1,4,5,6]),(t=e.state).id,t.resource_uri,t.date_created,t.appearanceRules,a=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(t,["id","resource_uri","date_created","appearanceRules"]),[4,fetch(window.vimeographyApiSettings.root+"vimeography/v1/galleries/"+e.data.id,{method:"PATCH",mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings?window.wpApiSettings.nonce:window.vimeographyApiSettings.nonce},body:JSON.stringify(a)})];case 2:return[4,l.sent().json()];case 3:return l.sent(),[3,6];case 4:return n=l.sent(),console.log(n),[3,6];case 5:return location.reload(),[7];case 6:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,r){function o(e){try{c(l.next(e))}catch(e){r(e)}}function i(e){try{c(l.throw(e))}catch(e){r(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(o,i)}c((l=l.apply(t,a||[])).next())}));var t,a,n,l},disabled:a},a?"Saving…":"Save changes"))))};const j=function(e){var t=n.useState(e.gallery.title+" copy"),a=t[0],l=t[1],o=n.useState(e.gallery.source_url),c=o[0],m=o[1],s=n.useState(!0),u=s[0],v=s[1],p=(0,i.useQueryClient)(),d=(0,i.useMutation)((function(e){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/galleries/"+e.gallery_id+"/duplicate",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings?window.wpApiSettings.nonce:window.vimeographyApiSettings.nonce},body:JSON.stringify({id:e.gallery_id,title:e.title,source_url:e.source,copy_appearance:e.copyAppearance})})}),{onSuccess:function(){p.invalidateQueries("galleries")}});return r.createPortal(n.createElement("div",{className:"vm-inset-0 vm-fixed vm-flex vm-items-center vm-justify-center vm-bg-gray-700 vm-bg-opacity-70"},n.createElement("div",{className:"vm-bg-gray-100 vm-rounded vm-p-10 vm-shadow vm-w-full vm-relative vm-max-w-lg"},n.createElement("div",{className:"vm-text-3xl vm-stroke-current vm-text-white vm-cursor-pointer vm-absolute vm-right-0",style:{transform:"translate(5px, -70px)"},onClick:function(){return e.setDuplicateGalleryModalOpen(!1)}},n.createElement("svg",{className:"vm-w-6 vm-h-6",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}))),n.createElement("h2",{className:"vm-text-xl vm-mb-5 vm-font-semibold"},"Duplicate gallery"),n.createElement("form",{method:"get",action:""},n.createElement("div",{className:"vm-mb-4"},n.createElement("label",{className:"vm-text-sm vm-block vm-mb-1 vm-font-semibold"},"New Gallery Title"),n.createElement("input",{type:"text",value:a,onChange:function(e){return l(e.target.value)},className:"vm-w-72"})),n.createElement("div",{className:"vm-mb-5"},n.createElement("label",{className:"vm-text-sm vm-block vm-mb-1 vm-font-semibold"},"Show the videos from"),n.createElement("input",{type:"text",value:c,onChange:function(e){return m(e.target.value)},className:"vm-w-72"})),n.createElement("div",{className:"vm-mb-8"},n.createElement("label",{className:"vm-flex vm-items-center"},n.createElement("input",{type:"checkbox",checked:u,onChange:function(e){return v(e.target.checked)}})," ",n.createElement("span",{className:"vm-ml-1"},"Also copy gallery appearance settings"))),n.createElement("button",{onClick:function(){return t=void 0,n=void 0,l=function(){var t;return function(e,t){var a,n,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,d.mutate({gallery_id:e.gallery.id,title:a,source:c,copyAppearance:u})];case 1:return n.sent(),[4,e.setDuplicateGalleryModalOpen(!1)];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),console.log(t),[3,4];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{c(l.next(e))}catch(e){a(e)}}function i(e){try{c(l.throw(e))}catch(e){a(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof r?a:new r((function(e){e(a)}))).then(o,i)}c((l=l.apply(t,n||[])).next())}));var t,n,r,l},className:"vm-bg-blue-500 vm-text-white vm-px-3 vm-py-2 vm-rounded hover:vm-bg-blue-700",disabled:d.isLoading},d.isLoading?"Duplicating…":"Duplicate gallery")))),document.body)};const V=function(e){var t=e.gallery,a=(0,i.useQueryClient)(),r=(0,i.useMutation)((function(e){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/galleries/"+e,{method:"DELETE",mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings?window.wpApiSettings.nonce:window.vimeographyApiSettings.nonce}})}),{onSuccess:function(){a.invalidateQueries("galleries")}});return n.createElement("tr",{className:"vm-text-sm vm-text-gray-700 odd:vm-bg-gray-50",key:t.id},n.createElement("td",{className:"vm-p-4"},t.id),n.createElement("td",null,n.createElement("strong",null,n.createElement("a",{href:"?page=vimeography-edit-galleries&id="+t.id},t.title))),n.createElement("td",{className:"vm-p-4"},n.createElement("a",{className:"vm-text-blue-500",href:t.source_url,target:"_blank"},t.source_url)),n.createElement("td",{className:"vm-p-4 vm-font-mono"},'[vimeography id="',t.id,'"]'),n.createElement("td",{className:"vm-p-4"},t.theme_name),n.createElement("td",{className:"vm-p-4"},t.date_created),n.createElement("td",{className:"vm-p-4"},n.createElement("div",{className:"vm-flex vm-items-center"},n.createElement("a",{href:"?page=vimeography-edit-galleries&id="+t.id,title:"Edit Gallery",className:"vm-cursor-pointer"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"#ad915e",className:"vm-w-6 vm-h-6 vm-mx-2"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}))),n.createElement("a",{href:"#",className:"vm-cursor-pointer",onClick:function(a){a.preventDefault(),e.setGalleryToDuplicate(t.id),e.setDuplicateGalleryModalOpen(!0)}},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"#4d60bf",className:"vm-w-6 vm-h-6 vm-mx-2"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"}))),n.createElement("a",{className:"vm-cursor-pointer",title:"Delete Gallery",onClick:function(){return o=t.id,e=void 0,a=void 0,l=function(){return function(e,t){var a,n,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}}(this,(function(e){switch(e.label){case 0:if(!confirm("WARNING: You are about to delete this gallery. 'Cancel' to stop, 'OK' to delete."))return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,r.mutate(o)];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(t,r){function o(e){try{c(l.next(e))}catch(e){r(e)}}function i(e){try{c(l.throw(e))}catch(e){r(e)}}function c(e){var a;e.done?t(e.value):(a=e.value,a instanceof n?a:new n((function(e){e(a)}))).then(o,i)}c((l=l.apply(e,a||[])).next())}));var e,a,n,l,o}},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"#B73657",className:"vm-w-6 vm-h-6 vm-mx-2"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))))))};var G=function(e){return n.createElement(h.OL,{className:"vm-mr-6 vm-py-2 vm-text-base focus:vm-outline-none vm-font-semibold vm-text-gray-600",activeClassName:"vm-border-b-4 vm-border-indigo-500",to:e.to,exact:"/"===e.to},e.children)};const Z=function(){return n.createElement("div",{className:"vm-my-8"},n.createElement(G,{to:"/"},"Galleries"),n.createElement(G,{to:"/tools"},"Tools"))},K=function(e){return n.createElement("div",{className:"vm-border vm-rounded"},e.data.map((function(e){return n.createElement("div",{key:e.id,className:"vm-p-4 vm-border-b"},n.createElement("span",{className:"vm-font-semibold"},e.title," "),n.createElement(h.rU,{to:"/filters/"+e.id,className:"vm-text-blue-500"},"Edit"))})))};const F=function(){var e=n.useState(""),t=e[0],a=e[1],r=(0,i.useQueryClient)(),l=(0,o.k6)(),c=(0,i.useMutation)((function(e){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/filters",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings?window.wpApiSettings.nonce:window.vimeographyApiSettings.nonce},body:JSON.stringify({title:e})})}),{onSuccess:function(){r.invalidateQueries("filters")}});return n.createElement(n.Fragment,null,n.createElement("div",{className:"vm-flex vm-mb-4"},n.createElement("h2",{className:"vm-text-xl vm-flex-1"},"Create a new filter"),n.createElement(h.rU,{to:"/filters"},"Back to all filters")),n.createElement("div",null,n.createElement("label",{className:"vm-font-semibold vm-block vm-text-base vm-mb-1 vm-text-gray-600"},"Filter name"),n.createElement("input",{type:"text",value:t,onChange:function(e){return a(e.target.value)},className:"vm-mb-4 vm-w-72 vm-block"}),n.createElement("button",{onClick:function(){return e=void 0,a=void 0,r=function(){var e;return function(e,t){var a,n,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}}(this,(function(a){switch(a.label){case 0:if(""===t)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,c.mutate(t)];case 2:return a.sent(),l.push("/filters"),[3,4];case 3:return e=a.sent(),console.log(e),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(t,l){function o(e){try{c(r.next(e))}catch(e){l(e)}}function i(e){try{c(r.throw(e))}catch(e){l(e)}}function c(e){var a;e.done?t(e.value):(a=e.value,a instanceof n?a:new n((function(e){e(a)}))).then(o,i)}c((r=r.apply(e,a||[])).next())}));var e,a,n,r},className:"vm-rounded vm-bg-blue-500 vm-text-white vm-px-3 vm-py-2"},"Create filter")),n.createElement("div",{className:"vm-my-4"},n.createElement("ul",null,n.createElement("li",null,"For ",n.createElement("strong",null,"training videos,")," you might create a"," ",n.createElement("strong",null,"Teacher")," filter with"," ",n.createElement("strong",null,"Joe, Sue, and Bill")," as choices."),n.createElement("li",null,"For ",n.createElement("strong",null,"car videos,")," you might create a"," ",n.createElement("strong",null,"Make")," filter with"," ",n.createElement("strong",null,"Subaru, Honda, and Tesla")," as choices."),n.createElement("li",null,"For ",n.createElement("strong",null,"sports videos,")," you might create a"," ",n.createElement("strong",null,"Sport")," filter with"," ",n.createElement("strong",null,"Baseball, Football, and Soccer")," as choices."),n.createElement("li",null,"For ",n.createElement("strong",null,"videos about books,")," you might create an"," ",n.createElement("strong",null,"Author")," filter with"," ",n.createElement("strong",null,"Malcolm Gladwell, Tim Ferriss, and Derek Sivers")," as choices."))))};var Y=a(5587),q=a(4285),Q=function(){return(Q=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const X=function(e){var t=(0,Y.nB)({id:e.id}),a=t.attributes,r=t.listeners,l=t.setNodeRef,o=t.transform,i=t.transition,c=t.isDragging,m={transform:q.ux.Transform.toString(o),transition:i};return n.createElement("div",Q({className:"vm-border-b vm-text-xl vm-p-4 vm-bg-white "+(c?"vm-shadow-xl vm-z-10":""),ref:l,style:m},a,r),n.createElement("div",{className:"vm-flex vm-items-center"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-mr-2 vm-text-gray-400 vm-cursor-move",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})),n.createElement("span",{className:"vm-flex-1"},e.option.title),n.createElement("span",{className:"vm-font-mono vm-text-sm"},"vimeography:",e.option.title)))};var J=a(9752);const $=function(e){var t=(0,J.Dy)((0,J.VT)(J.we),(0,J.VT)(J.Lg,{coordinateGetter:Y.is}));return n.createElement("div",{className:"vm-mb-4 vm-border vm-rounded"},n.createElement(J.LB,{sensors:t,collisionDetection:J.pE,onDragEnd:function(t){return e.dispatch({type:"SORT_OPTIONS",payload:t})}},n.createElement(Y.Fo,{items:e.options.map((function(e){return e.id})),strategy:Y.qw},e.options.map((function(e){return n.createElement(X,{key:e.id,id:e.id,option:e})})))))};var ee=function(){return(ee=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const te=function(e){return n.createElement("svg",ee({"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",width:997.861,height:450.808,viewBox:"0 0 997.861 450.808"},e),n.createElement("path",{fill:"#f2f2f2",d:"M871.992 181.558h30.159v104.398h-30.159z"}),n.createElement("path",{fill:"#f2f2f2",d:"M922.068 266.317l-73.353-87.265-147.24 1.346-89.319 86.998 1.805 1.16h-.645v180.957h308.555V268.556l.197-2.239z"}),n.createElement("path",{fill:"#e6e6e6",d:"M848.792 179.238l-91.638 107.436v162.839h164.717V266.236l-73.079-86.998z"}),n.createElement("path",{fill:"#3f3d56",d:"M823.272 359.461h33.639v29.733h-33.639zM823.272 307.996h33.639v29.262h-33.639z"}),n.createElement("path",{fill:"#fff",d:"M823.272 359.461h33.639v29.733h-33.639zM823.272 307.996h33.639v29.262h-33.639zM673.777 351.571h33.639v29.733h-33.639zM673.777 300.106h33.639v29.262h-33.639z"}),n.createElement("path",{fill:"#f2f2f2",d:"M633.992 181.558h30.159v104.398h-30.159z"}),n.createElement("path",{fill:"#f2f2f2",d:"M684.068 266.317l-73.353-87.265-147.24 1.346-89.319 86.998 1.805 1.16h-.645v180.957h308.555V268.556l.197-2.239z"}),n.createElement("path",{fill:"#e6e6e6",d:"M610.792 179.238l-91.638 107.436v162.839h164.717V266.236l-73.079-86.998z"}),n.createElement("path",{fill:"#3f3d56",d:"M585.272 359.461h33.639v29.733h-33.639zM585.272 307.996h33.639v29.262h-33.639z"}),n.createElement("path",{fill:"#fff",d:"M585.272 359.461h33.639v29.733h-33.639zM585.272 307.996h33.639v29.262h-33.639zM435.777 351.571h33.639v29.733h-33.639zM435.777 300.106h33.639v29.262h-33.639z"}),n.createElement("path",{fill:"#f2f2f2",d:"M380.154 91.46h40.3v139.501h-40.3z"}),n.createElement("path",{fill:"#f2f2f2",d:"M447.068 204.718L349.051 88.112 152.302 89.91 32.951 206.161l2.411 1.55h-.861v241.802h412.303V207.711l.264-2.993z"}),n.createElement("path",{fill:"#e6e6e6",d:"M349.153 88.36L226.702 231.921v217.592h220.102V204.611L349.153 88.36z"}),n.createElement("path",{fill:"#3f3d56",d:"M315.053 329.181h44.95v39.731h-44.95zM315.053 260.412h44.95v39.101h-44.95z"}),n.createElement("path",{fill:"#fff",d:"M315.053 329.181h44.95v39.731h-44.95zM315.053 260.412h44.95v39.101h-44.95zM115.29 318.639h44.95v39.731h-44.95zM115.29 249.869h44.95v39.101h-44.95z"}),n.createElement("path",{fill:"#3f3d56",d:"M0 448.62h963.951v2H0z"}),n.createElement("ellipse",{cx:151.872,cy:352.472,rx:29.099,ry:59.374,fill:"#3f3d56"}),n.createElement("path",{d:"M154.56 449.658c-11.655-69.925-.118-139.598 0-140.293l2.267.384c-.117.692-11.588 69.999 0 139.532z",fill:"#4cb5c2"}),n.createElement("path",{fill:"#4cb5c2",d:"M151.178 353.78l26.313-14.075 1.085 2.028-26.313 14.074zM123.406 348.783l1.085-2.028 26.31 14.083-1.085 2.027z"}),n.createElement("ellipse",{cx:81.955,cy:260.903,rx:56.915,ry:116.129,fill:"#4cb5c2"}),n.createElement("path",{d:"M88.295 450.808c-22.765-136.585-.23-272.673 0-274.032l2.267.384c-.23 1.356-22.698 137.077 0 273.27z",fill:"#3f3d56"}),n.createElement("path",{fill:"#3f3d56",d:"M81.114 264.43l51.468-27.53 1.085 2.029-51.468 27.529zM26.797 252.72l1.086-2.029 51.46 27.544-1.085 2.028z"}),n.createElement("ellipse",{cx:216.754,cy:191.008,rx:77.883,ry:158.914,fill:"#4cb5c2"}),n.createElement("path",{d:"M225.847 450.808c-31.14-186.837-.315-372.992 0-374.85l2.267.384c-.314 1.855-31.073 187.644 0 374.089z",fill:"#3f3d56"}),n.createElement("path",{fill:"#3f3d56",d:"M215.803 196.207l70.43-37.671 1.084 2.028-70.429 37.67zM141.474 179.434l1.085-2.027 70.42 37.69-1.086 2.027z"}),n.createElement("ellipse",{cx:871.029,cy:352.472,rx:29.099,ry:59.374,fill:"#3f3d56"}),n.createElement("path",{d:"M868.342 449.658c11.655-69.925.117-139.598 0-140.293l-2.267.384c.117.692 11.588 69.999-.001 139.532z",fill:"#4cb5c2"}),n.createElement("path",{fill:"#4cb5c2",d:"M844.325 341.733l1.085-2.029 26.313 14.075-1.085 2.028zM872.1 360.838l26.31-14.083 1.085 2.028-26.31 14.082z"}),n.createElement("ellipse",{cx:940.946,cy:260.903,rx:56.915,ry:116.129,fill:"#4cb5c2"}),n.createElement("path",{d:"M934.607 450.808c22.765-136.585.23-272.673 0-274.032l-2.268.384c.23 1.356 22.699 137.077 0 273.27z",fill:"#3f3d56"}),n.createElement("path",{fill:"#3f3d56",d:"M889.234 238.928l1.085-2.028 51.468 27.53-1.085 2.028zM943.559 278.235l51.46-27.544 1.086 2.028-51.46 27.544z"}),n.createElement("ellipse",{cx:806.148,cy:191.008,rx:77.883,ry:158.914,fill:"#4cb5c2"}),n.createElement("path",{d:"M797.055 450.808c31.14-186.837.314-372.992 0-374.85l-2.268.384c.315 1.855 31.074 187.644 0 374.089z",fill:"#3f3d56"}),n.createElement("path",{fill:"#3f3d56",d:"M735.584 160.563l1.085-2.028 70.429 37.671-1.085 2.028zM809.923 215.097l70.42-37.69 1.084 2.028-70.419 37.69zM589.604 101.466l9.206-7.363c-7.151-.789-10.09 3.111-11.292 6.198-5.587-2.32-11.67.72-11.67.72l18.42 6.688a13.938 13.938 0 00-4.664-6.243zM364.604 36.466l9.206-7.363c-7.151-.789-10.09 3.111-11.292 6.198-5.587-2.32-11.67.72-11.67.72l18.42 6.688a13.938 13.938 0 00-4.664-6.243zM731.604 7.466L740.81.103c-7.151-.789-10.09 3.111-11.292 6.198-5.587-2.32-11.67.72-11.67.72l18.42 6.688a13.938 13.938 0 00-4.664-6.243zM750.19 437.052a13.918 13.918 0 00-6.969 1.87 14.982 14.982 0 00-25.03 11.13h45.95a13.99 13.99 0 00-13.95-13zM283.19 437.052a13.918 13.918 0 00-6.969 1.87 14.982 14.982 0 00-25.03 11.13h45.95a13.99 13.99 0 00-13.95-13zM522.19 437.052a13.918 13.918 0 00-6.969 1.87 14.982 14.982 0 00-25.03 11.13h45.95a13.99 13.99 0 00-13.95-13zM471.759 404.228H339.191v4.276h20.675v40.626h4.276v-40.626h80.527v40.626h4.277v-40.626h22.813v-4.276zM339.452 391.434H472.02v4.276H339.452zM339.452 380.743H472.02v4.276H339.452zM339.452 370.052H472.02v4.276H339.452zM678.759 404.228H546.191v4.276h20.675v40.626h4.276v-40.626h80.527v40.626h4.277v-40.626h22.813v-4.276zM546.452 391.434H679.02v4.276H546.452zM546.452 380.743H679.02v4.276H546.452zM546.452 370.052H679.02v4.276H546.452z"}))};var ae=function(){return(ae=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ne={id:"",slug:"",title:"",options:[]},re=function(e,t){switch(t.type){case"HYDRATE":return(0,s.ZP)(e,(function(e){e.id=t.payload.id,e.title=t.payload.title,e.slug=t.payload.slug,e.options=t.payload.options||[]}));case"EDIT_TITLE":return(0,s.ZP)(e,(function(e){e.title=t.payload}));case"ADD_OPTION":return""===t.payload.title?e:(0,s.ZP)(e,(function(e){e.options.push({id:t.payload.title,title:t.payload.title,slug:t.payload.title})}));case"SORT_OPTIONS":var a=t.payload,n=a.active,r=a.over;if(n.id!==r.id){var l=e.options.findIndex((function(e){return e.id===n.id})),o=e.options.findIndex((function(e){return e.id===r.id})),i=(0,Y.Rp)(e.options,l,o);return ae(ae({},e),{options:i})}return e;default:return e}};const le=function(){var e=(0,o.UO)(),t=n.useReducer(re,ne),a=t[0],r=t[1],l=(0,i.useQuery)(["filters",e.filterId],(function(){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/filters/"+e.filterId).then((function(e){return e.json()}))}),{staleTime:1/0}),c=l.isLoading,m=l.error,s=l.data;n.useEffect((function(){s&&r({payload:s,type:"HYDRATE"})}),[s]);var u=n.useState(""),v=u[0],p=u[1];return c?n.createElement("div",null,"Loading filter..."):m?n.createElement("div",null,"Error!"):n.createElement(n.Fragment,null,n.createElement("div",{className:"vm-flex vm-mb-4"},n.createElement("div",{className:"vm-flex-1 vm-text-xl"},"Edit Filter: ",a.title),n.createElement(h.rU,{to:"/filters",className:"vm-text-blue-500"},"Back to all filters")),n.createElement("div",{className:"vm-grid vm-grid-cols-2",style:{gridTemplateColumns:"320px 800px"}},n.createElement("div",null),n.createElement("div",null,n.createElement("div",null,0===a.options.length?n.createElement("div",{className:"vm-flex vm-items-center vm-flex-col vm-justify-center"},n.createElement(te,{width:"400",height:"250"}),n.createElement("h2",{className:"vm-text-2xl vm-text-gray-700 vm-font-semibold vm-mb-1"},"Add ",a.title),n.createElement("p",{className:"vm-text-lg vm-text-gray-600 vm-mb-4"},"Define choices your viewers can find videos by within a filter."),n.createElement("input",{type:"text",className:"vm-block vm-mb-2 vm-w-full vm-max-w-md",value:v,onChange:function(e){return p(e.target.value)},placeholder:"New "+a.title+"…"}),n.createElement("button",{className:"vm-bg-blue-500 vm-text-white vm-rounded vm-px-3 vm-py-2",onClick:function(){r({type:"ADD_OPTION",payload:{title:v}}),p("")}},"Add ",a.title)):n.createElement(n.Fragment,null,n.createElement("h2",{className:"vm-text-gray-600 vm-text-base vm-mb-2 vm-block vm-text-right"},a.options.length," ",a.title,a.options.length>1?"s":""),n.createElement($,{options:a.options,dispatch:r}),n.createElement("input",{type:"text",className:"vm-block vm-mb-2 vm-w-full vm-max-w-md",value:v,onChange:function(e){return p(e.target.value)},placeholder:"New "+a.title+"…",onKeyDown:function(e){"Enter"===e.key&&(r({type:"ADD_OPTION",payload:{title:v}}),p(""))}}),n.createElement("button",{className:"vm-bg-blue-500 vm-text-white vm-rounded vm-px-3 vm-py-2",onClick:function(){r({type:"ADD_OPTION",payload:{title:v}}),p("")}},"Add ",a.title))))))},oe=function(){var e=(0,i.useQuery)(["filters"],(function(){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/filters").then((function(e){return e.json()}))})),t=e.isLoading,a=(e.error,e.data);return t?n.createElement("div",null,"Loading filters…"):n.createElement("div",null,n.createElement(o.rs,null,n.createElement(o.AW,{path:"/filters",exact:!0},n.createElement("div",{className:"vm-flex vm-items-center vm-mb-4"},n.createElement("div",{className:"vm-flex-1"},n.createElement("h3",{className:"vm-text-xl vm-text-gray-700"},"Gallery Filters"),n.createElement("p",{className:"vm-text-base vm-text-gray-600"},"Help your viewers find the exact videos they're looking for.")),n.createElement(h.rU,{to:"/filters/new",className:"vm-text-blue-500"},"Add new filter")),0===a.length?n.createElement("div",null,"No filters."):n.createElement(K,{data:a})),n.createElement(o.AW,{path:"/filters/new"},n.createElement(F,null)),n.createElement(o.AW,{path:"/filters/:filterId"},n.createElement(le,null))))};var ie=n.lazy((function(){return a.e(853).then(a.t.bind(a,853,23))})),ce=function(){return n.createElement("h1",null,"You don't have any galleries."," ",n.createElement("a",{className:"vm-text-blue-500",href:"?page=vimeography-new-gallery",title:"Create a new gallery"},"Care to make one?"))},me=function(){return n.createElement("div",null,n.createElement("h2",{className:"vm-text-lg vm-text-gray-700"},"Back up all of your galleries with Vimeography Pro."),n.createElement("a",{href:"https://vimeography.com/pro",className:"vm-text-blue-500 vm-text-base",target:"_blank"},"Learn more"))};const se=function(){var e=n.useState(!1),t=e[0],a=e[1],r=n.useState(null),l=r[0],c=r[1],m=(0,i.useQuery)(["galleries"],(function(){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/galleries").then((function(e){return e.json()}))})),s=m.isLoading,u=(m.error,m.data);return s?n.createElement("div",null,"Loading..."):n.createElement(n.Fragment,null,t&&n.createElement(j,{gallery:u.find((function(e){return e.id===l})),setDuplicateGalleryModalOpen:a}),n.createElement(Z,null),n.createElement("div",{className:"vm-container"},0===u.length?n.createElement(ce,null):n.createElement(o.rs,null,n.createElement(o.AW,{path:"/",exact:!0},n.createElement("table",{className:"vm-my-4 vm-w-full vm-border vm-shadow-xl"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"vm-px-4 vm-py-4 vm-text-left"},"ID"),n.createElement("th",{className:"vm-px-4 vm-py-4 vm-text-left"},"Title"),n.createElement("th",{className:"vm-px-4 vm-py-4 vm-text-left"},"Video Source"),n.createElement("th",{className:"vm-px-4 vm-py-4 vm-text-left"},"Shortcode"),n.createElement("th",{className:"vm-px-4 vm-py-4 vm-text-left"},"Gallery Theme"),n.createElement("th",{className:"vm-px-4 vm-py-4 vm-text-left"},"Created on"),n.createElement("th",{className:"vm-px-4 vm-py-4 vm-text-left"},"Actions"))),n.createElement("tbody",null,u.map((function(e){return n.createElement(V,{key:e.id,gallery:e,setDuplicateGalleryModalOpen:a,setGalleryToDuplicate:c})}))))),n.createElement(o.AW,{path:"/tools",exact:!0},n.createElement(R.ErrorBoundary,{FallbackComponent:me},n.createElement(n.Suspense,{fallback:n.createElement("div",null)},n.createElement(ie,null)))),n.createElement(o.AW,{path:"/filters"},n.createElement(oe,null)))))};var ue=new c.S;r.render(n.createElement((function(){var e=new l.Z(document.location.search.substring(1)),t=e.get("id"),a=e.get("page"),r="vimeography-edit-galleries"===a&&null===t,c="vimeography-edit-galleries"===a&&null!==t;return n.createElement(i.QueryClientProvider,{client:ue},n.createElement(o.VA,null,n.createElement(p,null,r&&n.createElement(se,null),c&&n.createElement(d.Z,{id:t},n.createElement(W,null)))))}),null),document.getElementById("vimeography_admin_app"))},7278:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(7271).createContext({isLoading:!0,error:null,data:null,state:null,dispatch:function(){}})},526:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(7271).createContext({isLoading:!0,error:null,data:null,state:null,dispatch:function(){}})},6758:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7271),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_context_Gallery__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7278),react_query__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8767),immer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8172),react_helmet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4593),use_debounce__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9302),_context_Themes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(526),__assign=function(){return(__assign=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},__awaiter=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function o(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}c((n=n.apply(e,t||[])).next())}))},__generator=function(e,t){var a,n,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}},initialState={appearanceRules:[]},convertToDashedAttribute=function(e){return("gridColumnGap"===e?"columnGap":"gridRowGap"===e?"rowGap":e).replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},computeValue=function(e,t,a){void 0===t&&(t="");var n="numeric"===e||"slider"===e?"px":"";return""!==t?""+t.replace(/{{value}}/,a+n):""+a+n},reducer=function(state,action){switch(action.type){case"HYDRATE":case"EDIT_GALLERY_STATE":return __assign(__assign({},state),action.payload);case"RESET_GALLERY_APPEARANCE":return(0,immer__WEBPACK_IMPORTED_MODULE_4__.ZP)(state,(function(e){e.appearanceRules=[]}));case"UPDATE_GALLERY_APPEARANCE":var rules_1=[],buildCSS_1=function(e,t,a,n){return"/* "+n+"  */\n        "+(namespace_1?"#vimeography-gallery-"+state.id:"")+e+" { "+t+": "+a+(important_1?" !important;":";")+" }\n        "},_a=action.payload,id_1=_a.id,label_1=_a.label,type_1=_a.type,value_1=_a.value,properties=_a.properties,namespace_1=_a.namespace,important_1=_a.important,_b=_a.expressions,expressions=void 0===_b?[]:_b;return properties.map((function(e){var t=computeValue(type_1,e.transform,value_1),a=convertToDashedAttribute(e.attribute);rules_1.push({id:id_1,css:buildCSS_1(e.target,a,t,label_1)})})),expressions.map((function(expression){var attribute=convertToDashedAttribute(expression.attribute),calculatedValue;switch(expression.operator){case"+":calculatedValue=Math.ceil(parseInt(value_1)+eval(expression.value));break;case"-":calculatedValue=Math.ceil(parseInt(value_1)-eval(expression.value));break;case"/":calculatedValue=Math.ceil(parseInt(value_1)/eval(expression.value));break;case"*":calculatedValue=Math.ceil(parseInt(value_1)*eval(expression.value))}var computedValue=computeValue(type_1,expression.transform,calculatedValue.toString());rules_1.push({id:id_1,css:buildCSS_1(expression.target,attribute,computedValue,label_1)})})),(0,immer__WEBPACK_IMPORTED_MODULE_4__.ZP)(state,(function(e){rules_1.map((function(t){var a=e.appearanceRules.findIndex((function(e){return e.id===t.id}));-1===a?e.appearanceRules.push(t):e.appearanceRules[a]=t}))}));default:return state}},GalleryProvider=function(e){var t=react__WEBPACK_IMPORTED_MODULE_0__.useContext(_context_Themes__WEBPACK_IMPORTED_MODULE_3__.Z),a=react__WEBPACK_IMPORTED_MODULE_0__.useReducer(reducer,initialState),n=a[0],r=a[1],l=(0,react_query__WEBPACK_IMPORTED_MODULE_5__.useQuery)(["galleries",e.id],(function(){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/galleries/"+e.id).then((function(e){return e.json()}))}),{staleTime:1/0}),o=l.isLoading,i=l.error,c=l.data;react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){c&&r({payload:c,type:"HYDRATE"})}),[c]),react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){if(c&&t.data){var a=t.data.find((function(e){return e.name===c.theme_name}));if(a){var n=document.getElementById("vimeography-gallery-"+e.id+"-custom-css");n&&(console.log("custom style found!"),console.log(n),a.settings.map((function(l){l.properties.map((function(o){for(var i=l.namespace?"#vimeography-gallery-"+e.id+o.target:o.target,c=0,m=n.sheet.cssRules;c<m.length;c++){var s=m[c];if(s.selectorText===i){var u=s.style.getPropertyValue(convertToDashedAttribute(o.attribute));if(!u)continue;if(o.transform){var v="{{value}}",p=o.transform.indexOf(v),d=o.transform.substr(p+v.length),h=u.indexOf(d),f=u.substring(p,h);u=f}var g=void 0;switch(l.type){case"colorpicker":g=u;break;case"numeric":case"slider":var E=u.replace("px","");g=Math.ceil(E);break;default:g=u}console.log("updating value for "+l.id+" to "+g),t.dispatch({type:"THEME.SETTING.UPDATE_DEFAULT_VALUE",payload:{themeName:a.name,settingId:l.id,value:g}}),r({type:"UPDATE_GALLERY_APPEARANCE",payload:__assign(__assign({},l),{value:g})})}}}))})),n.remove())}}}),[c,t]);var m=(0,use_debounce__WEBPACK_IMPORTED_MODULE_6__.Z)((function(t){return __awaiter(void 0,void 0,void 0,(function(){var a,n;return __generator(this,(function(r){switch(r.label){case 0:return a=document.getElementById(t).innerText,console.log({styles:a}),[4,fetch(window.vimeographyApiSettings.root+"vimeography/v1/galleries/"+e.id+"/appearance",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings?window.wpApiSettings.nonce:window.vimeographyApiSettings.nonce},body:JSON.stringify({css:a})})];case 1:return n=r.sent(),console.log(n.ok),[2]}}))}))}),2500);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){c&&(console.log("appearanceRules changed, debouncing and syncing…"),m.callback("vimeography-gallery-"+e.id+"-custom-css-preview"))}),[n.appearanceRules]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_context_Gallery__WEBPACK_IMPORTED_MODULE_1__.Z.Provider,{value:{isLoading:o,error:i,data:c,state:n,dispatch:r}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_helmet__WEBPACK_IMPORTED_MODULE_2__.q,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("script",{type:"text/javascript"},'!function(e,t,n){function a(){var e=t.getElementsByTagName("script")[0],n=t.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://beacon-v2.helpscout.net",e.parentNode.insertBefore(n,e)}if(e.Beacon=n=function(t,n,a){e.Beacon.readyQueue.push({method:t,options:n,data:a})},n.readyQueue=[],"complete"===t.readyState)return a();e.attachEvent?e.attachEvent("onload",a):e.addEventListener("load",a,!1)}(window,document,window.Beacon||function(){});'),react__WEBPACK_IMPORTED_MODULE_0__.createElement("script",{type:"text/javascript"},"window.Beacon('init', 'f7cb9d02-1ec7-4320-ad10-fcbc85e4d544')"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("style",{type:"text/css",id:"vimeography-gallery-"+e.id+"-custom-css-preview"},"\n      "+n.appearanceRules.map((function(e){return e.css})).join("\r\n\r\n")+"\n    ")),e.children)};const __WEBPACK_DEFAULT_EXPORT__=GalleryProvider}}]);
//# sourceMappingURL=385.chunk.a1532249b1f86565025f.js.map