{"version":3,"sources":["webpack://vimeography-admin/./src/providers/Themes.tsx","webpack://vimeography-admin/./src/components/GalleryEditor/AppearanceEditor/Colorpicker.tsx","webpack://vimeography-admin/./src/components/GalleryEditor/AppearanceEditor/Numeric.tsx","webpack://vimeography-admin/./src/components/GalleryEditor/AppearanceEditor/Slider.tsx","webpack://vimeography-admin/./src/components/GalleryEditor/AppearanceEditor/Visibility.tsx","webpack://vimeography-admin/./src/components/GalleryEditor/AppearanceEditor/AppearanceEditor.tsx","webpack://vimeography-admin/./src/components/GalleryEditor/BasicSettings/BasicSettings.tsx","webpack://vimeography-admin/./src/components/GalleryEditor/ThemeList/ThemeList.tsx","webpack://vimeography-admin/./src/components/GalleryEditor/ProSellPanel.tsx","webpack://vimeography-admin/./src/components/GalleryEditor/GalleryEditor.tsx","webpack://vimeography-admin/./src/containers/App.tsx","webpack://vimeography-admin/./src/bootstrap.tsx","webpack://vimeography-admin/./src/context/Gallery.ts","webpack://vimeography-admin/./src/context/Themes.ts","webpack://vimeography-admin/./src/providers/Gallery.tsx"],"names":["initialState","themes","reducer","state","action","type","length","next","payload","findIndex","theme","name","themeName","settings","setting","id","settingId","draft","value","console","log","props","dispatch","useQuery","fetch","window","wpApiSettings","root","then","res","json","isLoading","error","data","Themes","children","visible","setVisible","colorStr","setColorStr","ctx","className","onClick","style","backgroundColor","label","color","onChange","rgb","r","g","b","a","parseInt","setValue","defaultValue","min","max","step","formatter","val","checked","setChecked","e","isChecked","target","gallery","themesCtx","activeTheme","find","theme_name","maxHeight","background","thumbnail","textShadow","to","fill","viewBox","xmlns","d","stroke","strokeLinecap","strokeLinejoin","strokeWidth","map","control","Control","Numeric","Slider","Visibility","key","Setting","SettingLabel","isRefreshing","setIsRefreshing","handleUpdate","cache_timeout","url","location","href","fillRule","clipRule","video_limit","placeholder","gallery_width","featured_video","formRef","themeFieldRef","ref","method","vimeographyThemeNonce","isActiveTheme","toLowerCase","current","submit","src","version","ProSettings","NavItem","exact","activeClassName","Menu","variants","open","height","opacity","closed","isSettingsPanel","path","strict","isAppearancePanel","galleryCtx","isProPanel","animate","isExact","transition","duration","ease","bounce","ErrorBoundary","FallbackComponent","fallback","Skeleton","phrase","set","task","setInterval","phrases","Math","floor","random","clearInterval","backgroundImage","submitting","setSubmitting","title","source_url","mode","cache","credentials","headers","nonce","body","JSON","stringify","reload","disabled","document","search","substring","get","QueryClientProvider","client","Gallery","getElementById","appearanceRules","convertToDashedAttribute","attr","replace","computeValue","transform","suffix","attribute","computedValue","properties","expressions","property","push","css","expression","calculatedValue","operator","ceil","eval","toString","rule","index","el","GalleryProvider","staleTime","Infinity","customStyle","prop","selectorToMatch","namespace","sheet","cssRules","selectorText","getPropertyValue","searchTerm","tokenIndex","indexOf","terminator","substr","terminatorIndex","extractedValue","strippedValue","remove","saveCSS","stylesheetId","styles","innerText","response","ok","callback","join"],"mappings":"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","file":"241.chunk.bf9d5ac98044cabb20df.js","sourcesContent":["import * as React from \"react\";\nimport ThemesContext from \"../context/Themes\";\nimport { useQuery } from \"react-query\";\nimport produce from \"immer\";\n\ntype ThemesProviderProps = React.PropsWithChildren<{ id?: string }>;\n\n/** Defines which CSS selectors and properties that the setting will control.\n An array of one or more arrays, with each array containing two key/value pairs: */\nexport type ThemeSettingProperty = {\n  /** defines the CSS property that this setting will control for the corresponding target selector. */\n  attribute: string;\n\n  /** defines the CSS selector that the setting will affect */\n  target: string;\n\n  /** allows you to provide a string with a {{value}} token to define where the resulting pixel value should be injected in the generated CSS string value. */\n  transform?: string;\n};\n\n/**\n * Defines additional CSS selectors and properties that the setting will control,\n * but this time, relatively manipulating the value before associating it with the\n * selector. This is useful if you have two selectors whose values are linked and\n * change relative to one another (widescreen image ratios, margins etc.)\n */\nexport type ThemeSettingExpression = {\n  /** defines the CSS selector that the setting will affect */\n  target: string;\n  /** the CSS property that this setting will control for the target selector. */\n  attribute: string;\n  /** defines the symbol(s) to use for the mathmatical operation to perform on the original setting value. */\n  operator: ThemeSettingExpressionOperation;\n  /** is the input integer which acts as the addend, subtrahend, divisor, multiplier etc. to the original setting value. */\n  value: string;\n  /** allows you to provide a string with a {{value}} token to define where the resulting pixel value should be injected in the generated CSS string value. */\n  transform?: string;\n};\n\ntype ThemeSettingExpressionOperation = \"+\" | \"-\" | \"/\" | \"*\";\n\nexport type ThemeSettingType =\n  | \"colorpicker\"\n  | \"slider\"\n  | \"numeric\"\n  | \"visibility\";\n\n/** Contains all of the configurable settings for a theme. */\nexport type ThemeSetting = {\n  /** An arbitrary identifier string to associate with the UI control's form field. */\n  id: string;\n\n  /** The i18n-compatible label for this particular setting. */\n  label: string;\n\n  /**\n   * Whether or not the DOM element being targeted by the CSS is a child of the\n   * vimeography-gallery-{{gallery_id}} container. Usually TRUE, unless your theme\n   * uses a fancybox plugin, in which case, the modal window is outside of the container\n   * element, so FALSE would be appropriate.\n   */\n  namespace: boolean;\n\n  /** Whether or not this setting requires the Vimeography Pro plugin to be installed. TRUE if `type` is 'colorpicker', otherwise FALSE. */\n  pro: boolean;\n\n  /** The default CSS value for this setting. */\n  value: string;\n\n  /** Defines which CSS selectors and properties that the setting will control. */\n  properties: ThemeSettingProperty[];\n\n  /** The UI control to render for the current setting. */\n  type: ThemeSettingType;\n\n  /**\n   * Defines additional CSS selectors and properties that the setting will control,\n   * but this time, relatively manipulating the value before associating it with the\n   * selector. This is useful if you have two selectors whose values are linked and\n   * change relative to one another (widescreen image ratios, margins etc.)\n   */\n  expressions?: ThemeSettingExpression[];\n\n  /** If set to TRUE, the CSS rule will be saved with an `!important` flag. */\n  important?: boolean;\n\n  /** [required if `type` is 'slider' or 'numeric'] The minimum value that a CSS property can be set. */\n\n  min?: number;\n\n  /** [required if `type` is 'slider' or 'numeric'] The maximum value that a CSS property can be set. */\n\n  max?: number;\n\n  /** [required if `type` is 'slider' or 'numeric'] The increment/decrement value of the UI control. */\n  step?: number;\n};\n\nexport type Theme = {\n  name?: string;\n  description: string;\n  version: string;\n  thumbnail: string;\n  is_licensed: string;\n  settings: ThemeSetting[];\n};\n\nexport type ThemesState = {\n  themes?: Theme[] | [];\n};\n\ntype UpdateThemeSettingDefaultValuePayload = {\n  themeName: string;\n  settingId: string;\n  value: any;\n};\n\ntype Action =\n  | { type: `HYDRATE`; payload: Theme[] }\n  | { type: `RESET`; payload: Theme[] }\n  | {\n      type: `THEME.SETTING.UPDATE_DEFAULT_VALUE`;\n      payload: UpdateThemeSettingDefaultValuePayload;\n    };\n\nconst initialState: ThemesState = {\n  themes: [],\n};\n\nconst reducer = (state: ThemesState, action: Action) => {\n  switch (action.type) {\n    case \"HYDRATE\": {\n      if (state.themes.length > 0) return state; //only hydrate once\n\n      return produce(state, (next) => {\n        next.themes = action.payload;\n      });\n    }\n\n    case \"RESET\": {\n      return produce(state, (next) => {\n        next.themes = action.payload;\n      });\n    }\n\n    case `THEME.SETTING.UPDATE_DEFAULT_VALUE`: {\n      // console.log(action.payload);\n      const themeIndex = state.themes.findIndex(\n        (theme) => theme.name === action.payload.themeName\n      );\n      const settingIndex = state.themes[themeIndex].settings.findIndex(\n        (setting) => setting.id === action.payload.settingId\n      );\n\n      const nextState = produce(state, (draft) => {\n        draft.themes[themeIndex].settings[settingIndex].value =\n          action.payload.value;\n      });\n\n      return nextState;\n    }\n\n    default:\n      console.log(`unknown action type: ${action.type}`);\n      return state;\n  }\n};\n\nconst ThemesProvider = (props: ThemesProviderProps) => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  const { isLoading, error, data } = useQuery(`getThemes`, () =>\n    fetch(window.wpApiSettings.root + `vimeography/v1/themes`)\n      .then((res) => {\n        return res.json();\n      })\n      .then((payload) => {\n        dispatch({ payload, type: \"HYDRATE\" });\n        return payload;\n      })\n  );\n\n  return (\n    <ThemesContext.Provider\n      value={{\n        isLoading,\n        error,\n        data,\n        state,\n        dispatch,\n      }}\n    >\n      {props.children}\n    </ThemesContext.Provider>\n  );\n};\n\nexport default ThemesProvider;\n","import * as React from \"react\";\nimport { ChromePicker } from \"react-color\";\nimport GalleryContext from \"~/context/Gallery\";\nimport { ThemeSetting } from \"~/providers/Themes\";\n\ntype ControlProps = {\n  setting: ThemeSetting;\n};\n\nconst Colorpicker = (props: ControlProps) => {\n  const setting = props.setting;\n  const [visible, setVisible] = React.useState(false);\n  const [colorStr, setColorStr] = React.useState(setting.value);\n  const ctx = React.useContext(GalleryContext);\n\n  const handleChange = (color) => {\n    const colorStr = `rgb(${color.rgb.r} ${color.rgb.g} ${color.rgb.b} / ${\n      color.rgb.a\n    })`;\n\n    setColorStr(colorStr);\n\n    ctx.dispatch({\n      type: `UPDATE_GALLERY_APPEARANCE`,\n      payload: { ...setting, value: colorStr },\n    });\n  };\n\n  return (\n    <div>\n      <div\n        className=\"vm-flex vm-items-center\"\n        onClick={() => setVisible(!visible)}\n      >\n        <div\n          className=\"vm-w-8 vm-h-6 vm-mr-2 vm-border-2 vm-border-white vm-shadow vm-cursor-pointer\"\n          style={{ backgroundColor: colorStr }}\n        />\n        <label className=\"vm-font-semibold\">{setting.label}</label>\n      </div>\n\n      {visible && (\n        <ChromePicker\n          color={colorStr}\n          onChange={handleChange}\n          className=\"vm-mt-2\"\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Colorpicker;\n","import * as React from \"react\";\nimport InputNumber from \"rc-input-number\";\nimport \"rc-input-number/assets/index.css\";\n\nimport { ThemeSetting } from \"~/providers/Themes\";\nimport GalleryContext from \"~/context/Gallery\";\n\ntype ControlProps = {\n  setting: ThemeSetting;\n};\n\nconst NumericControl = (props: ControlProps) => {\n  const setting = props.setting;\n  const [value, setValue] = React.useState(parseInt(setting.value));\n  const ctx = React.useContext(GalleryContext);\n\n  const handleChange = (value: number) => {\n    setValue(value);\n    ctx.dispatch({\n      type: `UPDATE_GALLERY_APPEARANCE`,\n      payload: { ...setting, value },\n    });\n  };\n\n  return (\n    <div>\n      <div className=\"vm-font-semibold vm-mb-2\">{setting.label}</div>\n      <InputNumber\n        value={value}\n        defaultValue={setting.value}\n        min={setting.min}\n        max={setting.max}\n        step={setting.step}\n        formatter={(val) => `${val}px`}\n        onChange={handleChange}\n      />\n    </div>\n  );\n};\n\nexport default NumericControl;\n","import * as React from \"react\";\n\nimport Slider from \"rc-slider\";\nimport \"rc-slider/assets/index.css\";\n\nimport GalleryContext from \"~/context/Gallery\";\nimport { ThemeSetting } from \"~/providers/Themes\";\n\ntype ControlProps = {\n  setting: ThemeSetting;\n};\n\nconst SliderControl = (props: ControlProps) => {\n  const setting = props.setting;\n  const [value, setValue] = React.useState(parseInt(setting.value));\n  const ctx = React.useContext(GalleryContext);\n\n  const handleChange = (value: number) => {\n    setValue(value);\n    ctx.dispatch({\n      type: `UPDATE_GALLERY_APPEARANCE`,\n      payload: { ...setting, value },\n    });\n  };\n\n  return (\n    <div>\n      <div className=\"vm-font-semibold vm-mb-2\">{setting.label}</div>\n      <Slider\n        value={parseInt(value)}\n        onChange={handleChange}\n        min={parseInt(setting.min)}\n        max={parseInt(setting.max)}\n        step={parseInt(setting.step)}\n      />\n    </div>\n  );\n};\n\nexport default SliderControl;\n","import * as React from \"react\";\nimport Toggle from \"react-toggle\";\nimport \"react-toggle/style.css\"; // for ES6 modules\n\nimport GalleryContext from \"~/context/Gallery\";\nimport { ThemeSetting } from \"~/providers/Themes\";\n\ntype ControlProps = {\n  setting: ThemeSetting;\n};\n\nconst VisibilityControl = (props: ControlProps) => {\n  const setting = props.setting;\n\n  // uses the default value from the theme settings.php file\n  const [checked, setChecked] = React.useState(\n    setting.value === \"block\" ? true : false\n  );\n\n  const ctx = React.useContext(GalleryContext);\n\n  const handleChange = (e) => {\n    const isChecked = e.target.checked;\n    setChecked(isChecked);\n    ctx.dispatch({\n      type: `UPDATE_GALLERY_APPEARANCE`,\n      payload: { ...setting, value: isChecked ? `block` : `none` },\n    });\n  };\n\n  return (\n    <div>\n      <label className=\"vm-flex vm-items-center\">\n        <Toggle checked={checked} onChange={handleChange} />\n        <span className=\"vm-font-semibold vm-mb-2 vm-ml-2 vm-transform vm-translate-y-1\">\n          {setting.label}\n        </span>\n      </label>\n    </div>\n  );\n};\n\nexport default VisibilityControl;\n","import * as React from \"react\";\nimport GalleryContext from \"~/context/Gallery\";\nimport ThemesContext from \"~/context/Themes\";\nimport { Link } from \"react-router-dom\";\n\nimport { Theme } from \"~/providers/Themes\";\n\nimport Colorpicker from \"./Colorpicker\";\nimport NumericControl from \"./Numeric\";\nimport SliderControl from \"./Slider\";\nimport VisibilityControl from \"./Visibility\";\n\nconst AppearanceEditor = () => {\n  const gallery = React.useContext(GalleryContext);\n  const themesCtx = React.useContext(ThemesContext);\n\n  if (themesCtx.isLoading) return <div>Loading…</div>;\n\n  const activeTheme: Theme = themesCtx.state.themes.find(\n    (theme: Theme) => theme.name === gallery.data.theme_name\n  );\n\n  return (\n    <div className=\"vm-overflow-scroll\" style={{ maxHeight: `30rem` }}>\n      <div className=\"vm-py-5 vm-border-b vm-border-gray-200 vm-relative\">\n        <div\n          className=\"vm-absolute vm-inset-0 vm-opacity-90\"\n          style={{\n            background: `linear-gradient(to left, rgb(230, 100, 101), rgb(145 152 229 / 56%)), url(${\n              activeTheme.thumbnail\n            }) no-repeat 100% 100%`,\n          }}\n        />\n        <div className=\"vm-z-10 vm-relative\">\n          <div className=\"vm-flex vm-items-center vm-px-4 vm-py-2\">\n            <div className=\"vm-flex-1\">\n              <div\n                className=\"vm-text-white\"\n                style={{ textShadow: `rgb(28 31 35 / 40%) 0px 2px 2px` }}\n              >\n                Current gallery theme\n              </div>\n\n              <div\n                className=\"vm-font-semibold vm-text-white vm-text-2xl\"\n                style={{ textShadow: `rgb(28 31 35 / 40%) 0px 2px 2px` }}\n              >\n                {activeTheme.name}\n              </div>\n            </div>\n\n            <Link\n              to=\"/appearance/themes\"\n              className=\"vm-bg-white vm-px-2 vm-py-1 vm-rounded vm-text-gray-700 vm-flex vm-items-center vm-text-xs vm-border\"\n            >\n              <svg\n                className=\"vm-w-4 vm-h-4 vm-mr-1\"\n                fill=\"currentColor\"\n                viewBox=\"0 0 20 20\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path d=\"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z\" />\n              </svg>\n              Switch theme…\n            </Link>\n          </div>\n        </div>\n      </div>\n\n      <button\n        className=\"vm-p-4 vm-text-blue-500 vm-flex vm-items-center hover:vm-underline\"\n        onClick={() => {\n          gallery.dispatch({ type: `RESET_GALLERY_APPEARANCE` });\n          themesCtx.dispatch({ type: `RESET`, payload: themesCtx.data });\n        }}\n      >\n        <svg\n          className=\"vm-w-4 vm-h-4 vm-mr-1\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n          />\n        </svg>\n        Reset appearance\n      </button>\n\n      {activeTheme.settings.map((control) => {\n        let Control = null;\n\n        if (control.type === \"colorpicker\") {\n          Control = Colorpicker;\n        } else if (control.type === \"numeric\") {\n          Control = NumericControl;\n        } else if (control.type === \"slider\") {\n          Control = SliderControl;\n        } else if (control.type === \"visibility\") {\n          Control = VisibilityControl;\n        } else {\n          return null;\n        }\n\n        return (\n          <div\n            key={control.id}\n            className=\"vm-px-4 vm-py-5 vm-border-b vm-border-gray-200\"\n          >\n            <Control setting={control} />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default AppearanceEditor;\n","import * as React from \"react\";\nimport { NavLink, Route, Switch } from \"react-router-dom\";\nimport GalleryContext from \"~/context/Gallery\";\n\nconst Setting = ({ children }) => <div className=\"vm-mb-4\">{children}</div>;\n\nconst SettingLabel = ({ children }) => (\n  <label className=\"vm-font-semibold vm-text-gray-700 vm-block vm-mb-1\">\n    {children}\n  </label>\n);\n\nconst BasicSettings = () => {\n  const ctx = React.useContext(GalleryContext);\n\n  const [isRefreshing, setIsRefreshing] = React.useState(false);\n\n  const handleUpdate = (payload) => {\n    ctx.dispatch({\n      type: `EDIT_GALLERY_STATE`,\n      payload,\n    });\n  };\n\n  return (\n    <div className=\"vm-p-4\">\n      <Setting>\n        <SettingLabel>Refresh the videos every</SettingLabel>\n        {/* Specifies how frequently Vimeography should check your Vimeo source for any new videos that may have been added. */}\n\n        <div className=\"vm-flex vm-items-center vm-justify-between\">\n          <select\n            className=\"\"\n            value={ctx.state.cache_timeout}\n            onChange={(e) =>\n              handleUpdate({ cache_timeout: parseInt(e.target.value) })\n            }\n          >\n            <option value=\"0\">page load</option>\n            <option value=\"900\">15 minutes</option>\n            <option value=\"1800\">30 minutes</option>\n            <option value=\"3600\">hour</option>\n            <option value=\"86400\">day</option>\n            <option value=\"604800\">week</option>\n            <option value=\"2419200\">month</option>\n          </select>\n\n          <button\n            className=\"vm-flex vm-items-center vm-text-blue-500 vm-outline-none focus:vm-outline-none\"\n            onClick={() => {\n              setIsRefreshing(true);\n              const url =\n                window.location.href +\n                `&vimeography-action=refresh_gallery_cache`;\n              window.location.href = url;\n            }}\n          >\n            <svg\n              className={`vm-w-4 vm-h-4 vm-mr-1 ${\n                isRefreshing ? \"vm-animate-spin\" : \"\"\n              }`}\n              fill=\"currentColor\"\n              viewBox=\"0 0 20 20\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n            {isRefreshing ? \"Refreshing…\" : \"Force refresh\"}\n          </button>\n        </div>\n      </Setting>\n      <Setting>\n        <SettingLabel>Number of videos</SettingLabel>\n        <input\n          type=\"number\"\n          min=\"0\"\n          max=\"25\"\n          value={ctx.state.video_limit}\n          onChange={(e) =>\n            handleUpdate({ video_limit: parseInt(e.target.value) })\n          }\n          className=\"vm-mb-2 vm-w-24\"\n        />\n        <p className=\"vm-text-xs vm-text-gray-400\">\n          Specifies the number of videos that will appear in your gallery. Set\n          to 0 for the maximum amount. You can display unlimited videos with{\" \"}\n          <a\n            className=\"vm-text-blue-500\"\n            href=\"https://vimeography.com/pro\"\n            target=\"_blank\"\n          >\n            Vimeography Pro.\n          </a>\n        </p>\n      </Setting>\n      <Setting>\n        <SettingLabel>Max gallery width</SettingLabel>\n        <input\n          type=\"text\"\n          placeholder=\"eg. 960px, 35%\"\n          value={ctx.state.gallery_width}\n          onChange={(e) => handleUpdate({ gallery_width: e.target.value })}\n          className=\"vm-mb-2\"\n        />\n        <p className=\"vm-text-xs vm-text-gray-400\">\n          Specifies the maximum width that your gallery container can expand to.\n        </p>\n      </Setting>\n      <Setting>\n        <SettingLabel>Featured video URL</SettingLabel>\n        <input\n          type=\"text\"\n          placeholder=\"eg. https://vimeo.com/3567483\"\n          value={ctx.state.featured_video}\n          onChange={(e) => handleUpdate({ featured_video: e.target.value })}\n          className=\"vm-mb-2 vm-w-full\"\n        />\n        <p className=\"vm-text-xs vm-text-gray-400\">\n          Sets the specified video as the first video that appears in your\n          gallery.\n        </p>\n      </Setting>\n    </div>\n  );\n};\n\nexport default BasicSettings;\n","import * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport GalleryContext from \"~/context/Gallery\";\nimport ThemesContext from \"~/context/Themes\";\n\nconst ThemeList = () => {\n  const gallery = React.useContext(GalleryContext);\n  const themes = React.useContext(ThemesContext);\n\n  const formRef = React.useRef();\n  const themeFieldRef = React.useRef();\n\n  const handleClick = (themeName) => {\n    themeFieldRef.current.value = themeName;\n    formRef.current.submit();\n  };\n\n  return (\n    <div>\n      <Link\n        to=\"/appearance\"\n        className=\"vm-text-blue-500 vm-p-4 vm-flex vm-items-center\"\n      >\n        <svg\n          className=\"vm-w-4 vm-h-4 vm-mr-1\"\n          fill=\"currentColor\"\n          viewBox=\"0 0 20 20\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\"\n            clipRule=\"evenodd\"\n          />\n        </svg>\n        Back to appearance editor\n      </Link>\n      <form ref={formRef} method=\"post\" action=\"\">\n        <input\n          type=\"hidden\"\n          name=\"vimeography-theme-verification\"\n          value={window.vimeographyThemeNonce}\n        />\n        <input type=\"hidden\" name=\"theme_name\" value=\"\" ref={themeFieldRef} />\n        <input\n          type=\"hidden\"\n          name=\"vimeography-action\"\n          value=\"set_gallery_theme\"\n        />\n      </form>\n      <div className=\"vm-max-h-96 vm-overflow-scroll\">\n        {themes.data.map((theme) => {\n          const isActiveTheme =\n            theme.name.toLowerCase() === gallery.data.theme_name.toLowerCase();\n\n          return (\n            <div\n              key={theme.name}\n              onClick={() => handleClick(theme.name)}\n              className={`vm-group vm-flex vm-items-center vm-px-4 vm-py-2 vm-cursor-pointer vm-border-b vm-transition ${\n                isActiveTheme ? \"vm-bg-indigo-500\" : \"hover:vm-bg-indigo-600\"\n              }`}\n            >\n              <img\n                src={theme.thumbnail}\n                className=\"vm-w-10 vm-mr-3 vm-rounded vm-shadow\"\n              />\n              <div>\n                <span\n                  className={`vm-font-semibold vm-block vm-text-sm group-hover:vm-text-white ${\n                    isActiveTheme ? \"vm-text-white\" : \"vm-text-gray-700\"\n                  }`}\n                >\n                  {theme.name}\n                </span>\n                <span\n                  className={`vm-text-xs group-hover:vm-text-gray-50 ${\n                    isActiveTheme ? \"vm-text-gray-50\" : \"vm-text-gray-400\"\n                  }`}\n                >\n                  v{theme.version}\n                </span>\n                {!isActiveTheme && (\n                  <span\n                    className={`vm-text-xs vm-opacity-0 group-hover:vm-opacity-100 group-hover:vm-text-gray-50 \"vm-text-gray-400\"\n                    }`}\n                  >\n                    {\" \"}\n                    • Switch to {theme.name}\n                  </span>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default ThemeList;\n","import * as React from \"react\";\n\nconst ProSellPanel = () => {\n  return (\n    <div className=\"vm-p-5\">\n      <h2 className=\"vm-text-xl vm-font-bold vm-text-gray-700 vm-mb-4\">\n        Add the features your viewers are asking for.\n      </h2>\n\n      <ul className=\"vm-mb-6\">\n        <li className=\"vm-flex vm-items-center vm-mb-2\">\n          <svg\n            className=\"vm-w-5 vm-h-5 vm-text-blue-500 vm-mr-2\"\n            fill=\"currentColor\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path d=\"M4.555 5.168A1 1 0 003 6v8a1 1 0 001.555.832L10 11.202V14a1 1 0 001.555.832l6-4a1 1 0 000-1.664l-6-4A1 1 0 0010 6v2.798l-5.445-3.63z\" />\n          </svg>\n          <span className=\"vm-text-gray-600\">Unlimited videos</span>\n        </li>\n        <li className=\"vm-flex vm-items-center vm-mb-2\">\n          <svg\n            className=\"vm-w-5 vm-h-5 vm-text-yellow-500 vm-mr-2\"\n            fill=\"currentColor\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path d=\"M9 9a2 2 0 114 0 2 2 0 01-4 0z\" />\n            <path\n              fillRule=\"evenodd\"\n              d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z\"\n              clipRule=\"evenodd\"\n            />\n          </svg>\n          Searchable galleries\n        </li>\n        <li className=\"vm-flex vm-items-center vm-mb-2\">\n          <svg\n            className=\"vm-w-5 vm-h-5 vm-text-indigo-500 vm-mr-2\"\n            fill=\"currentColor\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path d=\"M5.5 16a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 16h-8z\" />\n          </svg>\n          Downloadable videos\n        </li>\n        <li className=\"vm-flex vm-items-center vm-mb-2\">\n          <svg\n            className=\"vm-w-5 vm-h-5 vm-text-green-500 vm-mr-2\"\n            fill=\"currentColor\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path d=\"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z\" />\n          </svg>\n          Simple sorting\n        </li>\n        <li className=\"vm-flex vm-items-center vm-mb-2\">\n          <svg\n            className=\"vm-w-5 vm-h-5 vm-text-pink-500 vm-mr-2\"\n            fill=\"currentColor\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              fillRule=\"evenodd\"\n              d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\"\n              clipRule=\"evenodd\"\n            />\n          </svg>\n          Show protected videos\n        </li>\n        <li className=\"vm-flex vm-items-center vm-mb-2\">\n          <svg\n            className=\"vm-w-5 vm-h-5 vm-text-red-500 vm-mr-2\"\n            fill=\"currentColor\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              fillRule=\"evenodd\"\n              d=\"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z\"\n              clipRule=\"evenodd\"\n            />\n          </svg>\n          No code required\n        </li>\n      </ul>\n\n      <a\n        href=\"https://vimeography.com/pro\"\n        target=\"_blank\"\n        className=\"vm-px-4 vm-py-3 vm-rounded vm-border vm-shadow-sm vm-mx-auto vm-text-base vm-bg-white vm-text-indigo-800 vm-text-center vm-mb-2 vm-inline-flex vm-items-center vm-justify-center vm-w-full\"\n      >\n        <svg\n          className=\"vm-w-5 vm-h-5 vm-mr-1\"\n          fill=\"currentColor\"\n          viewBox=\"0 0 20 20\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z\"\n            clipRule=\"evenodd\"\n          />\n        </svg>\n        Watch the video\n      </a>\n      <p className=\"vm-text-xs vm-text-gray-500 vm-text-center\">\n        Over 5,000 happy customers!\n      </p>\n    </div>\n  );\n};\n\nexport default ProSellPanel;\n","import * as React from \"react\";\nimport { NavLink, Route, Switch, useRouteMatch } from \"react-router-dom\";\nimport GalleryContext from \"~/context/Gallery\";\n\nimport AppearanceEditor from \"./AppearanceEditor/AppearanceEditor\";\nimport BasicSettings from \"./BasicSettings/BasicSettings\";\nimport ThemeList from \"./ThemeList/ThemeList\";\nimport { motion } from \"framer-motion\";\n\nimport { ErrorBoundary } from \"react-error-boundary\";\nconst ProSettings = React.lazy(() => import(\"vimeography_pro/ProSettings\"));\nimport ProSellPanel from \"./ProSellPanel\";\n\nconst NavItem = (props) => (\n  <NavLink\n    to={props.to}\n    exact\n    className=\"vm-bg-gray-50 vm-border-b vm-flex vm-items-center vm-px-4 vm-py-3 vm-text-gray-700 vm-outline-none hover:no-underline focus:vm-outline-none focus:vm-no-underline vm-font-semibold\"\n    activeClassName=\"vm-bg-white vm-border-l-4 vm-border-indigo-700 vm-outline-none focus:vm-outline-none focus:vm-no-underline\"\n  >\n    {props.children}\n  </NavLink>\n);\n\nconst Menu = () => {\n  const variants = {\n    open: { height: \"auto\", opacity: 1 },\n    closed: { height: \"0\", opacity: 0 },\n  };\n\n  const isSettingsPanel = useRouteMatch({ path: \"/\", strict: true });\n  const isAppearancePanel = useRouteMatch({\n    path: \"/appearance\",\n    strict: true,\n  });\n\n  const galleryCtx = React.useContext(GalleryContext);\n  const isProPanel = useRouteMatch({ path: \"/pro\", strict: true });\n\n  return (\n    <>\n      <NavItem to=\"/\">\n        <svg\n          className=\"vm-w-5 vm-h-5 vm-mr-2 vm-text-blue-600\"\n          fill=\"currentColor\"\n          viewBox=\"0 0 20 20\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            d=\"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z\"\n            clipRule=\"evenodd\"\n          />\n        </svg>\n        <span>Settings</span>\n      </NavItem>\n\n      <motion.div\n        className=\"vm-overflow-hidden\"\n        animate={isSettingsPanel.isExact ? \"open\" : \"closed\"}\n        variants={variants}\n        transition={{ duration: 0.25, ease: \"easeOut\", bounce: 0 }}\n      >\n        <BasicSettings />\n      </motion.div>\n\n      <NavItem to=\"/appearance\">\n        <svg\n          className=\"vm-w-5 vm-h-5 vm-mr-2 vm-text-green-600\"\n          fill=\"currentColor\"\n          viewBox=\"0 0 20 20\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            d=\"M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z\"\n            clipRule=\"evenodd\"\n          />\n        </svg>\n        <span>Appearance</span>\n      </NavItem>\n      <motion.div\n        className=\"vm-overflow-hidden\"\n        animate={isAppearancePanel ? \"open\" : \"closed\"}\n        variants={variants}\n        transition={{ duration: 0.25, ease: \"easeOut\", bounce: 0 }}\n      >\n        <Switch>\n          <Route path=\"/appearance/themes\">\n            <ThemeList />\n          </Route>\n          <Route path=\"/appearance\" strict>\n            <AppearanceEditor />\n          </Route>\n        </Switch>\n      </motion.div>\n      <NavItem to=\"/pro\">\n        <svg\n          className=\"vm-w-5 vm-h-5 vm-mr-2 vm-text-yellow-600\"\n          fill=\"currentColor\"\n          viewBox=\"0 0 20 20\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            d=\"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z\"\n            clipRule=\"evenodd\"\n          />\n        </svg>\n        <span>Vimeography Pro</span>\n      </NavItem>\n      <motion.div\n        className=\"vm-overflow-hidden\"\n        animate={isProPanel ? \"open\" : \"closed\"}\n        variants={variants}\n        transition={{ duration: 0.25, ease: \"easeOut\", bounce: 0 }}\n      >\n        <ErrorBoundary FallbackComponent={ProSellPanel}>\n          <React.Suspense fallback={<p>Loading Vimeography Pro…</p>}>\n            <ProSettings isProPanel={isProPanel} galleryCtx={galleryCtx} />\n          </React.Suspense>\n        </ErrorBoundary>\n      </motion.div>\n    </>\n  );\n};\n\nconst Skeleton = () => {\n  const [phrase, set] = React.useState(`Loading…`);\n\n  React.useEffect(() => {\n    const cb = () => {\n      const phrases = [\n        `Be right there…`,\n        `Churning the butter…`,\n        `Petting cute doggies…`,\n        `Checking the fridge again…`,\n        `Flossing…`,\n        `Loading…`,\n        `Waiting in line…`,\n        `On my way…`,\n        `Ready in a sec…`,\n        `Coming in for landing…`,\n        `Adding final touches…`,\n        `Quick restroom visit…`,\n        `Pouring coffee…`,\n        `Traffic on 77N…`,\n        `Stuck behind a slow walker…`,\n        `Waiting for rain to stop…`,\n        `Going as fast as I can…`,\n        `Almost got it…`,\n      ];\n      const phrase = phrases[Math.floor(Math.random() * phrases.length)];\n      set(phrase);\n    };\n\n    const task = setInterval(cb, 2000);\n\n    return () => {\n      clearInterval(task);\n    };\n  }, []);\n\n  return (\n    <div\n      className=\"vm-bg-gray-200 vm-animate-pulse vm-w-full vm-flex vm-flex-col vm-items-center vm-justify-center vm-rounded vm-border vm-border-gray-200 vm-mt-5 vm-sticky vm-top-10 vm-text-indigo-600\"\n      style={{\n        height: `30rem`,\n        backgroundImage: `linear-gradient(16deg, rgba(116, 116, 116,0.02) 0%, rgba(116, 116, 116,0.02) 25%,transparent 25%, transparent 96%,rgba(177, 177, 177,0.02) 96%, rgba(177, 177, 177,0.02) 100%),linear-gradient(236deg, rgba(148, 148, 148,0.02) 0%, rgba(148, 148, 148,0.02) 53%,transparent 53%, transparent 59%,rgba(56, 56, 56,0.02) 59%, rgba(56, 56, 56,0.02) 100%),linear-gradient(284deg, rgba(16, 16, 16,0.02) 0%, rgba(16, 16, 16,0.02) 46%,transparent 46%, transparent 71%,rgba(181, 181, 181,0.02) 71%, rgba(181, 181, 181,0.02) 100%),linear-gradient(316deg, rgba(197, 197, 197,0.02) 0%, rgba(197, 197, 197,0.02) 26%,transparent 26%, transparent 49%,rgba(58, 58, 58,0.02) 49%, rgba(58, 58, 58,0.02) 100%),linear-gradient(90deg, rgb(255,255,255),rgb(255,255,255))`,\n      }}\n    >\n      <svg\n        className=\"vm-w-6 vm-h-6 vm-animate-spin vm-text-indigo-800 vm-mb-2\"\n        fill=\"currentColor\"\n        viewBox=\"0 0 20 20\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          d=\"M9.504 1.132a1 1 0 01.992 0l1.75 1a1 1 0 11-.992 1.736L10 3.152l-1.254.716a1 1 0 11-.992-1.736l1.75-1zM5.618 4.504a1 1 0 01-.372 1.364L5.016 6l.23.132a1 1 0 11-.992 1.736L4 7.723V8a1 1 0 01-2 0V6a.996.996 0 01.52-.878l1.734-.99a1 1 0 011.364.372zm8.764 0a1 1 0 011.364-.372l1.733.99A1.002 1.002 0 0118 6v2a1 1 0 11-2 0v-.277l-.254.145a1 1 0 11-.992-1.736l.23-.132-.23-.132a1 1 0 01-.372-1.364zm-7 4a1 1 0 011.364-.372L10 8.848l1.254-.716a1 1 0 11.992 1.736L11 10.58V12a1 1 0 11-2 0v-1.42l-1.246-.712a1 1 0 01-.372-1.364zM3 11a1 1 0 011 1v1.42l1.246.712a1 1 0 11-.992 1.736l-1.75-1A1 1 0 012 14v-2a1 1 0 011-1zm14 0a1 1 0 011 1v2a1 1 0 01-.504.868l-1.75 1a1 1 0 11-.992-1.736L16 13.42V12a1 1 0 011-1zm-9.618 5.504a1 1 0 011.364-.372l.254.145V16a1 1 0 112 0v.277l.254-.145a1 1 0 11.992 1.736l-1.735.992a.995.995 0 01-1.022 0l-1.735-.992a1 1 0 01-.372-1.364z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n      <div className=\"vm-text-xs\">{phrase}</div>\n    </div>\n  );\n};\n\nconst GalleryEditor = () => {\n  const ctx = React.useContext(GalleryContext);\n  const [submitting, setSubmitting] = React.useState(false);\n\n  const handleSubmit = async () => {\n    setSubmitting(true);\n\n    try {\n      const {\n        id,\n        resource_uri,\n        date_created,\n        appearanceRules,\n        ...payload\n      } = ctx.state;\n      const response = await fetch(\n        window.wpApiSettings.root + `vimeography/v1/galleries/${ctx.data.id}`,\n        {\n          method: \"PATCH\",\n          mode: \"same-origin\",\n          cache: \"no-cache\",\n          credentials: \"same-origin\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-WP-Nonce\": window.wpApiSettings.nonce,\n            // 'Content-Type': 'application/x-www-form-urlencoded',\n          },\n          body: JSON.stringify(payload), // body data type must match \"Content-Type\" header\n        }\n      );\n\n      await response.json();\n    } catch (error) {\n      console.log(error);\n    } finally {\n      // setSubmitting(false);\n      location.reload();\n    }\n  };\n\n  if (ctx.isLoading) return <Skeleton />;\n\n  return (\n    <div className=\"vm-bg-gray-100 vm-rounded vm-border vm-border-gray-200 vm-mt-5 vm-sticky vm-top-10\">\n      <div className=\"vm-p-4 vm-bg-indigo-700 vm-rounded-t\">\n        <h2 className=\"vm-text-lg vm-text-white vm-font-bold\">\n          {ctx.state.title}\n        </h2>\n        <a href={ctx.state.source_url} className=\"vm-text-indigo-50 vm-text-sm\">\n          {ctx.state.source_url}\n        </a>\n      </div>\n\n      <Menu />\n      <div>\n        <div className=\"vm-m-4 vm-flex vm-justify-end\">\n          <button\n            className=\"vm-bg-blue-600 vm-text-white vm-px-3 vm-py-2 vm-rounded\"\n            onClick={handleSubmit}\n            disabled={submitting}\n          >\n            {submitting ? \"Saving…\" : \"Save changes\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GalleryEditor;\n","import * as React from \"react\";\nimport URLSearchParams from \"@ungap/url-search-params\";\nimport { MemoryRouter as Router } from \"react-router-dom\";\n\nimport { QueryClient, QueryClientProvider } from \"react-query\";\nconst queryClient = new QueryClient();\n\nimport ThemesProvider from \"../providers/Themes\";\n\nimport GalleryProvider from \"../providers/Gallery\";\nimport GalleryEditor from \"../components/GalleryEditor/GalleryEditor\";\n\nconst App = () => {\n  const params = new URLSearchParams(document.location.search.substring(1));\n\n  const id = params.get(`id`);\n  // console.log(params.get(`page`));\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemesProvider>\n        <GalleryProvider id={id}>\n          <Router>\n            <GalleryEditor />\n          </Router>\n        </GalleryProvider>\n      </ThemesProvider>\n    </QueryClientProvider>\n  );\n};\n\nexport default App;\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport \"tailwindcss/tailwind.css\";\n\nimport App from \"./containers/App\";\nReactDOM.render(<App />, document.getElementById(\"vimeography_admin_app\"));\n","import * as React from \"react\";\nimport { GalleryState } from \"../providers/Gallery\";\n\ntype GalleryContext = {\n  isLoading: boolean;\n  error: Error;\n  data: GalleryState;\n  state: GalleryState;\n  dispatch: any;\n};\n\nconst ctx: GalleryContext = {\n  isLoading: true,\n  error: null,\n  data: null,\n  state: null,\n  dispatch: () => {},\n};\n\nconst GalleryContext = React.createContext(ctx);\n\nexport default GalleryContext;\n","import * as React from \"react\";\nimport { ThemesState } from \"../providers/Themes\";\n\ntype ThemesContext = {\n  isLoading: boolean;\n  error: Error;\n  data: ThemesState;\n  state: ThemesState;\n  dispatch: any;\n};\n\nconst ctx: ThemesContext = {\n  isLoading: true,\n  error: null,\n  data: null,\n  state: null,\n  dispatch: () => {},\n};\n\nconst ThemesContext = React.createContext(ctx);\n\nexport default ThemesContext;\n","import * as React from \"react\";\nimport GalleryContext from \"../context/Gallery\";\nimport { useQuery } from \"react-query\";\nimport produce from \"immer\";\nimport { Helmet } from \"react-helmet\";\nimport { useDebouncedCallback } from \"use-debounce\";\n\nimport { Theme, ThemeSetting, ThemeSettingType } from \"~/providers/Themes\";\nimport ThemesContext from \"../context/Themes\";\n\ntype GalleryProviderProps = React.PropsWithChildren<{ id?: string }>;\n\nexport type GalleryState = {\n  id?: number;\n  cache_timeout?: number;\n  date_created?: string;\n  featured_video?: string;\n  gallery_width?: string;\n  resource_uri?: string;\n  source_url?: string;\n  theme_name?: string;\n  title?: string;\n  video_limit?: number;\n  appearanceRules?: GalleryAppearanceRule[];\n  allow_downloads?: boolean;\n  sort?: SortType;\n  direction?: SortDirection;\n  enable_search?: boolean;\n  enable_tags?: boolean;\n  enable_playlist?: boolean;\n  per_page?: number;\n};\n\ntype SortDirection = \"asc\" | \"desc\";\ntype SortType =\n  | \"date\"\n  | \"likes\"\n  | \"comments\"\n  | \"plays\"\n  | \"alphabetical\"\n  | \"duration\"\n  | \"default\";\ninterface GalleryResponse {\n  id: number;\n  cache_timeout: number;\n  date_created: string;\n  featured_video: string;\n  gallery_width: string;\n  resource_uri: string;\n  source_url: string;\n  theme_name: string;\n  title: string;\n  video_limit: number;\n  allow_downloads?: boolean;\n  sort?: SortType;\n  direction?: SortDirection;\n  enable_search?: boolean;\n  enable_tags?: boolean;\n  enable_playlist?: boolean;\n  per_page?: number;\n}\n\nexport type GalleryAppearanceRule = {\n  id: string;\n  css: string;\n};\n\ntype Action =\n  | { type: `HYDRATE`; payload: GalleryResponse }\n  | { type: `EDIT_GALLERY_STATE`; payload: GalleryState }\n  | { type: `RESET_GALLERY_APPEARANCE` }\n  | { type: `UPDATE_GALLERY_APPEARANCE`; payload: ThemeSetting };\n\nconst initialState = {\n  appearanceRules: [],\n};\n\nconst convertToDashedAttribute = (attr: string) => {\n  let shimmedAttribute;\n\n  // backwards-compat for old gallery theme settings\n  // removes grid prefix from deprecated theme attributes\n  // for browser compatibility\n  if (attr === `gridColumnGap`) {\n    shimmedAttribute = `columnGap`;\n  } else if (attr === `gridRowGap`) {\n    shimmedAttribute = `rowGap`;\n  } else {\n    shimmedAttribute = attr;\n  }\n\n  return shimmedAttribute.replace(/[A-Z]/g, (a) => \"-\" + a.toLowerCase());\n};\n\nconst computeValue = (\n  type: ThemeSettingType,\n  transform: string = \"\",\n  value: string\n) => {\n  const suffix = type === \"numeric\" || type === \"slider\" ? \"px\" : \"\";\n\n  if (transform !== \"\") {\n    return `${transform.replace(/{{value}}/, value + suffix)}`;\n  } else {\n    return `${value}${suffix}`;\n  }\n};\n\nconst reducer = (state: GalleryState, action: Action) => {\n  switch (action.type) {\n    case \"HYDRATE\":\n    case `EDIT_GALLERY_STATE`: {\n      return {\n        ...state,\n        ...action.payload,\n      };\n    }\n\n    case `RESET_GALLERY_APPEARANCE`: {\n      return produce(state, (next) => {\n        next.appearanceRules = [];\n      });\n    }\n\n    case `UPDATE_GALLERY_APPEARANCE`: {\n      let rules: GalleryAppearanceRule[] = [];\n\n      const buildCSS = (\n        target: string,\n        attribute: string,\n        computedValue: string,\n        label: string\n      ) =>\n        `/* ${label}  */\n        ${\n          namespace ? \"#vimeography-gallery-\" + state.id : \"\"\n        }${target} { ${attribute}: ${computedValue}${\n          important ? \" !important;\" : \";\"\n        } }\n        `;\n\n      const {\n        id,\n        label,\n        type,\n        value,\n        properties,\n        namespace,\n        important,\n        expressions = [],\n      } = action.payload;\n\n      properties.map((property) => {\n        const computedValue = computeValue(type, property.transform, value);\n        const attribute = convertToDashedAttribute(property.attribute);\n\n        rules.push({\n          id,\n          css: buildCSS(property.target, attribute, computedValue, label),\n        });\n      });\n\n      expressions.map((expression) => {\n        const attribute = convertToDashedAttribute(expression.attribute);\n\n        let calculatedValue;\n\n        switch (expression.operator) {\n          case \"+\":\n            calculatedValue = Math.ceil(\n              parseInt(value) + eval(expression.value)\n            );\n            break;\n          case \"-\":\n            calculatedValue = Math.ceil(\n              parseInt(value) - eval(expression.value)\n            );\n            break;\n          case \"/\":\n            calculatedValue = Math.ceil(\n              parseInt(value) / eval(expression.value)\n            );\n            break;\n          case \"*\":\n            calculatedValue = Math.ceil(\n              parseInt(value) * eval(expression.value)\n            );\n            break;\n        }\n\n        const computedValue = computeValue(\n          type,\n          expression.transform,\n          calculatedValue.toString()\n        );\n\n        rules.push({\n          id,\n          css: buildCSS(expression.target, attribute, computedValue, label),\n        });\n      });\n\n      return produce(state, (next) => {\n        rules.map((rule) => {\n          const index = next.appearanceRules.findIndex(\n            (el) => el.id === rule.id\n          );\n\n          if (index === -1) {\n            next.appearanceRules.push(rule);\n          } else {\n            next.appearanceRules[index] = rule;\n          }\n        });\n      });\n    }\n\n    default:\n      // console.log(`unknown action type: ${action.type}`);\n      return state;\n  }\n};\n\nconst GalleryProvider = (props: GalleryProviderProps) => {\n  const themesCtx = React.useContext(ThemesContext);\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  const { isLoading, error, data } = useQuery(\n    [`galleries`, props.id],\n    () => {\n      return fetch(\n        window.wpApiSettings.root + `vimeography/v1/galleries/${props.id}`\n      ).then((res) => {\n        return res.json();\n      });\n    },\n    { staleTime: Infinity }\n  );\n\n  React.useEffect(\n    () => {\n      if (!data) return;\n      dispatch({ payload: data, type: \"HYDRATE\" });\n    },\n    [data]\n  );\n\n  // Detect any theme CSS customizations on load and\n  // send them to the themes context to hydrate\n  // the appearance controls with the correct values\n  React.useEffect(\n    () => {\n      if (!data) return;\n      if (!themesCtx.data) return;\n\n      const activeTheme: Theme = themesCtx.data.find(\n        (theme: Theme) => theme.name === data.theme_name\n      );\n\n      if (!activeTheme) return;\n\n      const customStyle = document.getElementById(\n        `vimeography-gallery-${props.id}-custom-css`\n      );\n\n      if (!customStyle) return;\n      console.log(`custom style found!`);\n      console.log(customStyle);\n      // since it is possible that the element it hidden (as in a modal)\n      // try to get the defined value based on the loaded stylesheet\n      activeTheme.settings.map((setting) => {\n        setting.properties.map((prop) => {\n          // build the expected selector\n          const selectorToMatch = setting.namespace\n            ? `#vimeography-gallery-${props.id}${prop.target}`\n            : prop.target;\n\n          // search the stylesheet for the selector\n          for (let rule of customStyle.sheet.cssRules) {\n            // need to find a match for the target defined in our theme settings\n\n            if (rule.selectorText === selectorToMatch) {\n              // get the value for the current prop attribute\n\n              let value = rule.style.getPropertyValue(\n                convertToDashedAttribute(prop.attribute)\n              );\n\n              // if no value, no customization found for this particular setting\n              if (!value) continue;\n\n              // console.log(`value found for ${selectorToMatch}!`);\n              // console.log(value);\n\n              // check if it needs to be un-transformed to extract the value\n              if (prop.transform) {\n                // console.log(\n                //   `extracting value from transform ${prop.transform}`\n                // );\n\n                const searchTerm = `{{value}}`;\n\n                // find the index of `{{value}}` in the transform\n                const tokenIndex = prop.transform.indexOf(searchTerm);\n\n                // find the characters which appear after the searchTerm in the transform\n                const terminator = prop.transform.substr(\n                  tokenIndex + searchTerm.length\n                );\n\n                // get the index of the terminating characters within the existing customized css value\n                const terminatorIndex = value.indexOf(terminator);\n\n                // pull the value out of the string\n                const extractedValue = value.substring(\n                  tokenIndex,\n                  terminatorIndex\n                );\n\n                // console.log(\n                //   `extracted ${extractedValue} as the value based on the transform`\n                // );\n\n                value = extractedValue;\n              }\n\n              // reformat the incoming `action.payload.value` to the expected format for the ui control based on the settings type `setting.type`\n\n              let computedValue;\n\n              // console.log(setting);\n\n              switch (setting.type) {\n                case \"colorpicker\": {\n                  // { r: 51, g: 51, b: 51, a: 1 } react-color may already convert this for us, test!\n                  computedValue = value;\n                  break;\n                }\n\n                case \"numeric\":\n                case \"slider\": {\n                  // must be a number\n                  const strippedValue = value.replace(\"px\", \"\");\n                  const convertedValue = Math.ceil(strippedValue);\n\n                  computedValue = convertedValue;\n                  break;\n                }\n\n                default: {\n                  computedValue = value;\n                  break;\n                }\n              }\n\n              console.log(\n                `updating value for ${setting.id} to ${computedValue}`\n              );\n\n              // update the default `activeTheme`s `setting.value` for `setting.id` to the determined configured `value`\n              themesCtx.dispatch({\n                type: `THEME.SETTING.UPDATE_DEFAULT_VALUE`,\n                payload: {\n                  themeName: activeTheme.name,\n                  settingId: setting.id,\n                  value: computedValue,\n                },\n              });\n\n              dispatch({\n                type: `UPDATE_GALLERY_APPEARANCE`,\n                payload: { ...setting, value: computedValue },\n              });\n            }\n          }\n        });\n      });\n\n      // Remove the style that came from the server since we'll be\n      // generating a new one in the client anyway\n      customStyle.remove();\n    },\n    [data, themesCtx]\n  );\n\n  const saveCSS = useDebouncedCallback(\n    // function\n    async (stylesheetId) => {\n      const styles = document.getElementById(stylesheetId).innerText;\n      console.log({ styles });\n\n      const response = await fetch(\n        window.wpApiSettings.root +\n          `vimeography/v1/galleries/${props.id}/appearance`,\n        {\n          method: \"POST\",\n          mode: \"same-origin\",\n          cache: \"no-cache\",\n          credentials: \"same-origin\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-WP-Nonce\": window.wpApiSettings.nonce,\n            // 'Content-Type': 'application/x-www-form-urlencoded',\n          },\n          body: JSON.stringify({ css: styles }), // body data type must match \"Content-Type\" header\n        }\n      );\n\n      console.log(response.ok);\n    },\n    // delay in ms\n    2500\n  );\n\n  React.useEffect(\n    () => {\n      if (!data) return;\n\n      console.log(`appearanceRules changed, debouncing and syncing…`);\n      saveCSS.callback(`vimeography-gallery-${props.id}-custom-css-preview`);\n    },\n    [state.appearanceRules]\n  );\n\n  return (\n    <GalleryContext.Provider\n      value={{\n        isLoading,\n        error,\n        data,\n        state,\n        dispatch,\n      }}\n    >\n      <Helmet>\n        <script type=\"text/javascript\">{`!function(e,t,n){function a(){var e=t.getElementsByTagName(\"script\")[0],n=t.createElement(\"script\");n.type=\"text/javascript\",n.async=!0,n.src=\"https://beacon-v2.helpscout.net\",e.parentNode.insertBefore(n,e)}if(e.Beacon=n=function(t,n,a){e.Beacon.readyQueue.push({method:t,options:n,data:a})},n.readyQueue=[],\"complete\"===t.readyState)return a();e.attachEvent?e.attachEvent(\"onload\",a):e.addEventListener(\"load\",a,!1)}(window,document,window.Beacon||function(){});`}</script>\n        <script type=\"text/javascript\">{`window.Beacon('init', 'f7cb9d02-1ec7-4320-ad10-fcbc85e4d544')`}</script>\n        <style\n          type=\"text/css\"\n          id={`vimeography-gallery-${props.id}-custom-css-preview`}\n        >{`\n      ${state.appearanceRules.map((rule) => rule.css).join(\"\\r\\n\\r\\n\")}\n    `}</style>\n      </Helmet>\n\n      {props.children}\n    </GalleryContext.Provider>\n  );\n};\n\nexport default GalleryProvider;\n"],"sourceRoot":""}